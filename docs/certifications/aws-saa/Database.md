---
title: データベース
---

## Aurora

### 1. サービス概要

Amazon Aurora は、高いパフォーマンスと可用性を兼ね備えた RDB（リレーショナルデータベース）サービスです。  
AWS によるフルマネージドである点や、MySQL/PostgreSQL 互換のエンジンを選択できる点などが特徴で、従来の商用データベースに比べて優れたコストパフォーマンスとスケーラビリティを提供します。

主なユースケースとして、

- 大規模アプリケーションのオンライン処理
- 急激にアクセスが増加する EC サイト
- 金融システムなどミッションクリティカルな業務

が挙げられます。
レイテンシの低い読み取り負荷にも対応可能で、OLTP と OLAP のハイブリッド環境として活用されるケースもあります。

### 2. 主な特徴と機能

#### 2.1 MySQL/PostgreSQL 互換エンジン

Aurora では、MySQL 互換エンジンと PostgreSQL 互換エンジンから選択可能です。  
アプリケーション側のドライバや SQL 文を大きく修正することなく、Aurora に移行できる点が魅力です。

#### 2.2 高速で信頼性の高いストレージ

Aurora はストレージ層を分散・自動スケーリングする仕組みを持ち、最大 64TB まで拡張可能です。  
6 つのコピーを 3 つの AZ に分散配置することで、障害に対する耐久性とスケーラビリティを両立します。

#### 2.3 セミスレーブ機能 (Aurora Replica)

Aurora Replica を利用することで、読み取り専用インスタンスを増設し、読み取り負荷を分散可能です。  
最大 15 個のレプリカを作成でき、プライマリインスタンスの障害時には自動フェイルオーバー機能により数秒でレプリカが昇格します。

#### 2.4 Aurora Serverless

Aurora Serverless を利用すると、使用状況に応じて自動的にキャパシティをスケールし、アイドル時にはコストを最小限に抑えることが可能です。  
突発的なアクセス増加があるアプリケーションや、ピーク時以外は負荷が少ないワークロードに適しています。

#### 2.5 高い可用性とバックアップ

Aurora はスナップショットや Point-in-Time リカバリをサポートし、継続的バックアップも実現します。  
また、マルチ AZ 構成が標準機能として組み込まれており、高い耐障害性を持ちながら運用が可能です。

#### 3. アーキテクチャおよび技術要素

1. クラスター概念を中心に、プライマリインスタンス（ライト/リード）＋ Aurora レプリカ（リード専用）を構成
2. ストレージは自動スケーリングし、6 つのコピーを 3 つの AZ に分散配置
3. 障害が発生した場合は、Aurora レプリカがプライマリにフェイルオーバーし、サービス継続
4. Aurora Serverless を選択することで、負荷に応じた自動スケーリングを行いコストと運用負荷を最適化

Aurora のストレージレイヤーが独立しており、コンピュートレイヤー（DB インスタンス）を追加・削除しても、一貫したデータビューを保てる設計になっています。

### 4. セキュリティと認証・認可

Aurora は他の RDS 系サービス同様、強固なセキュリティを提供します:

- **VPC 内配置**: セキュリティグループやネットワーク ACL を利用したネットワーク制御
- **暗号化**: AWS KMS による暗号化（暗号化されたストレージ、スナップショットなど）
- **AWS IAM 連携**: IAM を介したデータベース認証（IAM Database Authentication）に対応
- **ログ監査**: Access Log や Slow Query Log を有効化可能、CloudWatch Logs などで分析

### 5. 料金形態

Aurora の料金は以下の要素に基づきます:

- **DB インスタンス時間**: インスタンスサイズと稼働時間の従量課金
- **ストレージ使用量**: 使用した分だけスケーラブルで、GB 単位の従量課金
- **I/O リクエスト**: 書き込み操作に応じた追加料金（MySQL 互換版の場合など）
- **Aurora Serverless**: Capacity Unit 時間ごとの従量課金方式で、アイドル時コストを抑制

### 6. よくあるアーキテクチャ・設計パターン

Aurora を活用する主要パターンは以下の通りです:

- **高スループット OLTP**: 大量トランザクション処理が求められる EC サイトや金融業務でのメインデータベース
- **ハイブリッド分析**: アプリケーションでのオンライン処理と、Aurora レプリカを活用した分析クエリの同時実行
- **Aurora Serverless**: スポット的にアクセスが増減する Web アプリや開発/検証環境でのコスト最適化
- **災害対策（DR）構成**: クロスリージョンレプリカやスナップショットを使い、万一の障害リスクに備える

### 7. 設定・デプロイ手順（ハンズオン例）

1. AWS コンソールで「RDS」を開き、「データベースの作成」を選択
2. エンジンとして「Amazon Aurora」を選択し、MySQL もしくは PostgreSQL 互換エディションを指定
3. インスタンスタイプや DB クラスター設定を決定（例: db.r6g.large など）
4. VPC・サブネット・セキュリティグループを設定し、パブリックアクセスの可否を指定
5. マルチ AZ や Aurora レプリカの有無を選択し、オプションを適宜設定
6. 「作成」をクリックし、DB クラスターが起動し次第、エンドポイント経由で接続テスト
   ###8. 試験で問われやすいポイント
   ####8.1 エンジンの違い(MySQL/PostgreSQL 互換)

- **MySQL 互換**: トラフィック高い OLTP ワークロードに最適、MySQL 用ツールとの互換性が高い
- **PostgreSQL 互換**: 拡張機能や SQL 標準順守度が高く、分析系や開発で人気
- **選択基準**: 既存アプリの互換性やエコシステムを考慮して決定

#### 8.2 ストレージの仕組み

- **分散ストレージ**: データを複数 AZ に跨って 6 重化するため耐障害性が高い
- **自動スケーリング**: 使用量に応じてストレージサイズを拡大、事前プロビジョニング不要

#### 8.3 レプリカとフェイルオーバー

- **Aurora Replica**: 読み込み専用ノードを追加し、読み取り性能を水平拡張
- **フェイルオーバー**: プライマリ障害時にレプリカが自動昇格してダウンタイムを最小化

#### 8.4 Aurora Serverless の特徴

- **自動スケール**: 負荷に応じて DB 容量が動的に増減
- **アイドルコスト削減**: 負荷が少ない時期は料金を抑えられる
- **ユースケース**: テスト・開発環境やアクセス急増の予測が困難なシナリオ

#### 8.5 セキュリティとネットワーク

- **VPC 配置**: セキュリティグループでインバウンド/アウトバウンドをコントロール
- **暗号化**: KMS 連携による暗号化を容易に設定
- **監査ログ**: クエリログやスローログを CloudWatch Logs に出力可能

#### 8.6 試験で頻出となる具体的な問われ方と答え

- Q: Aurora のストレージはどのように拡張する？
  - A: 自動スケーリングで最大 64TB まで拡張し、6 つのコピーを 3AZ に保持。
- Q: Aurora レプリカの目的は？
  - A: 読み取り専用ノードで読み込み負荷を分散し、プライマリ障害時のフェイルオーバー先になる。
- Q: Aurora Serverless が適しているのはどんなワークロード？
  - A: ピークが予測困難、または長時間アイドル状態になるアプリケーションでコストを最適化したい場合。
- Q: MySQL 互換版と PostgreSQL 互換版の選択基準は？
  - A: 既存アプリのドライバ互換性や SQL 機能要件、PostgreSQL 拡張機能の利用有無などを考慮。
- Q: Aurora の料金体系で特に注意すべき点は？
  - A: インスタンス時間、ストレージ使用量、I/O リクエスト、そして Serverless の場合は Capacity Unit 時間。

---

## DocumentDB

### 1. サービス概要

Amazon DocumentDB (with MongoDB compatibility) は、スケーラブルで可用性の高い、フルマネージドのドキュメントデータベースサービスです。  
MongoDB との互換性があり、既存の MongoDB アプリケーションを容易に移行できます。  
DocumentDB は、JSON 形式のドキュメントデータを柔軟に格納・管理でき、高いパフォーマンス、可用性、耐久性を提供します。  
開発者は、インフラの管理に煩わされることなく、アプリケーションの開発に集中できます。

主なユースケースとして、

- コンテンツ管理システム
- カタログ管理
- モバイルアプリケーションのバックエンド
- IoT データの格納
- パーソナライズされたレコメンデーション

などが挙げられます。

### 2. 主な特徴と機能

#### 2.1 MongoDB 互換性

Amazon DocumentDB は、MongoDB のワイヤプロトコル、API、ドライバーをサポートしており、既存の MongoDB アプリケーションを大幅な変更なしに移行できます。  
これにより、開発者は既存の知識やツールをそのまま活用できます。

#### 2.2 フルマネージドサービス

インフラのプロビジョニング、スケーリング、パッチ適用、バックアップなどの運用管理は AWS が自動で行います。  
これにより、開発者はデータベースの運用管理に煩わされることなく、アプリケーションの開発に集中できます。

#### 2.3 スケーラビリティとパフォーマンス

DocumentDB は、ストレージとコンピューティングリソースを個別にスケールできるため、アプリケーションの需要に合わせて柔軟にリソースを調整できます。  
高いスループットと低いレイテンシを実現し、大規模なアプリケーションにも対応できます。

#### 2.4 高い可用性と耐久性

DocumentDB は、複数のアベイラビリティーゾーンにデータを分散して保存し、自動的にフェイルオーバーを処理します。  
これにより、高い可用性と耐久性を実現し、データの損失を防ぎます。

#### 2.5 JSON ドキュメントのサポート

DocumentDB は、JSON 形式のドキュメントデータを柔軟に格納・管理できます。  
スキーマレスであるため、データ構造の変更に柔軟に対応できます。

#### 2.6 柔軟なクエリ

DocumentDB は、豊富なクエリ機能を提供し、JSON ドキュメントに対して効率的な検索や集計を行うことができます。  
インデックスを活用して高速な検索を実現できます。

#### 2.7 セキュリティ

DocumentDB は、データの暗号化、アクセス制御、ネットワーク分離などのセキュリティ機能を提供します。  
IAM によるアクセス制御、転送中のデータ暗号化、保存中のデータ暗号化、VPC 内でのプライベート接続をサポートしています。

- **IAM 連携**: AWS IAM を使用してアクセス制御と権限管理。
- **データ暗号化**: 転送中および保存中のデータを暗号化。
- **VPC サポート**: Amazon VPC 内でのプライベート接続。

#### 2.8 統合性

DocumentDB は、AWS の他のサービス（AWS Lambda、Amazon EC2、Amazon ECS など）と統合されており、様々なアプリケーションアーキテクチャに対応できます。  
AWS Glue と連携してデータの ETL 処理を行うことができます。

### 3. アーキテクチャおよび技術要素

1. クライアントアプリケーションは、MongoDB 互換のドライバーを使用して DocumentDB に接続。
2. DocumentDB は、複数のアベイラビリティーゾーンにデータを分散して保存。
3. クライアントからの読み取り/書き込みリクエストを処理。
4. ストレージとコンピューティングリソースは、必要に応じて個別にスケーリング。
5. 自動バックアップ機能により、データを安全に保護。

DocumentDB は、フルマネージドサービスとして提供され、高い可用性、スケーラビリティ、耐久性を内包しています。  
MongoDB の互換性により、既存の MongoDB アプリケーションを容易に移行できます。

### 4. セキュリティと認証・認可

セキュリティは DocumentDB の重要な要素です:

- **IAM によるアクセス制御**: AWS IAM を利用して、DocumentDB リソースへのアクセスを制御し、権限を管理。
- **データ暗号化**: 転送中および保存中のデータを暗号化し、データの機密性を保護。
- **VPC サポート**: Amazon VPC 内で DocumentDB を使用する場合、プライベート接続を確立。
- **監査ログ**: AWS CloudTrail を利用して、API 呼び出しやリソース変更を記録。

これにより、データの安全性とコンプライアンスを確保できます。

### 5. 料金形態

Amazon DocumentDB の料金は主に以下に基づきます:

- **インスタンス料金**: データベースインスタンスの実行時間に応じた従量課金。
- **ストレージ料金**: データベースに保存されたデータ量に応じた従量課金。
- **I/O 料金**: データベースへの読み書き I/O リクエスト数に応じた従量課金。
- **バックアップ料金**: 自動バックアップに利用されるストレージ量に応じた課金。

### 6. よくあるアーキテクチャ・設計パターン

一般的なパターンは以下の通りです:

- **コンテンツ管理システム (CMS)**: JSON ドキュメント形式のコンテンツデータを格納し、柔軟なクエリでコンテンツを検索。
- **カタログ管理**: 製品カタログ情報を格納し、検索やフィルタリングを効率化。
- **モバイルアプリケーションのバックエンド**: モバイルアプリケーションのユーザーデータ、設定データ、コンテンツを格納。
- **IoT データ格納**: IoT デバイスからのセンサーデータを JSON 形式で格納し、分析。
- **パーソナライズされたレコメンデーション**: ユーザーの行動履歴や好みを格納し、レコメンデーションを生成。

### 7. 設定・デプロイ手順（ハンズオン例）

1. AWS コンソールで DocumentDB クラスタを作成。
2. EC2 インスタンスから DocumentDB クラスタに接続。
3. MongoDB 互換のドライバーを使用して、JSON ドキュメントを挿入、更新、削除。
4. クエリを実行してデータを検索。
5. インデックスを作成してクエリパフォーマンスを向上。

### 8. 試験で問われやすいポイント

#### 8.1 MongoDB 互換性

- **ワイヤプロトコル**: MongoDB のワイヤプロトコルとの互換性について理解。
- **API**: MongoDB の API との互換性について理解。
- **ドライバー**: MongoDB ドライバーをそのまま利用できることを理解。

#### 8.2 フルマネージドサービス

- **運用管理**: インフラのプロビジョニング、スケーリング、パッチ適用、バックアップなどの運用管理が AWS に自動化されていることを理解。
- **開発への集中**: 開発者がデータベース運用に煩わされることなく、アプリケーション開発に集中できることを理解。

#### 8.3 スケーラビリティとパフォーマンス

- **リソーススケーリング**: ストレージとコンピューティングリソースを個別にスケーリングできることを理解。
- **高パフォーマンス**: 高いスループットと低いレイテンシを実現できることを理解。

#### 8.4 高い可用性と耐久性

- **マルチ AZ**: 複数アベイラビリティーゾーンにデータを分散して保存することを理解。
- **自動フェイルオーバー**: 自動フェイルオーバー機能で高い可用性を実現することを理解。

#### 8.5 JSON ドキュメントのサポート

- **JSON 形式**: JSON 形式のデータを柔軟に格納できることを理解。
- **スキーマレス**: スキーマレスであるため、データ構造の変更に柔軟に対応できることを理解。

#### 8.6 柔軟なクエリ

- **クエリ機能**: 豊富なクエリ機能で JSON ドキュメントを効率的に検索、集計できることを理解。
- **インデックス**: インデックスを活用して高速な検索ができることを理解。

#### 8.7 セキュリティ

- **IAM**: IAM によるアクセス制御と権限管理について理解。
- **データ暗号化**: 転送中および保存中のデータを暗号化することについて理解。
- **VPC サポート**: VPC 内でのプライベート接続について理解。

#### 8.8 料金体系

- **インスタンス料金**: データベースインスタンスの実行時間による従量課金について理解。
- **ストレージ料金**: 保存データ量による従量課金について理解。
- **I/O 料金**: データベースへの読み書き I/O リクエスト数による従量課金について理解。
- **バックアップ料金**: 自動バックアップに利用されるストレージ量による課金について理解。

#### 8.9 類似・関連サービスとの比較

- **Amazon DynamoDB**: Key-Value 型データベース。DocumentDB は JSON ドキュメント型データベース。
- **MongoDB Atlas**: マネージドな MongoDB サービス。DocumentDB は AWS プラットフォームに統合されたサービス。

#### 8.10 試験で頻出となる具体的な問われ方と答え

- Q: Amazon DocumentDB の主な用途は？
  - A: JSON ドキュメントデータを格納・管理する、フルマネージドデータベースサービス。
- Q: DocumentDB はどのデータベースと互換性がある？
  - A: MongoDB。
- Q: DocumentDB のフルマネージドとは？
  - A: インフラの運用管理が AWS に自動化されていること。
- Q: DocumentDB のデータストレージ形式は？
  - A: JSON ドキュメント。
- Q: DocumentDB のセキュリティ対策は？
  - A: IAM によるアクセス制御、データ暗号化、VPC サポートなど。
- Q: DocumentDB の料金体系は？
  - A: インスタンス、ストレージ、I/O、バックアップ量に応じた従量課金。
- Q: DocumentDB と DynamoDB の違いは？
  - A: DocumentDB は JSON ドキュメント型、DynamoDB は Key-Value 型。

---

## DynamoDB

### 1. サービス概要

**Amazon DynamoDB** は、高速かつ柔軟な NoSQL データベースサービス。  
ユーザーは、任意の規模でデータを保存、検索でき、高いスループットと低いレイテンシーを実現できる。  
DynamoDB は、フルマネージドサービスであり、ユーザーはデータベースのプロビジョニングや管理を行う必要はない。  
キーバリューストアとドキュメントストアの両方の機能を持ち、様々なデータモデルに対応できる。

主なユースケースとして、

- Web アプリケーション
- モバイルアプリケーション
- ゲームアプリケーション
- IoT アプリケーション
- 広告テクノロジー
- e コマース

などが挙げられる。  
Amazon DynamoDB は、これらのユースケースに対応するための様々な機能と、AWS の他のサービスとの統合を提供する。

### 2. 主な特徴と機能

### 2. 主な特徴と機能

#### 2.1 キーバリューストアとドキュメントストア

DynamoDB は、キーバリューストアとドキュメントストアの両方の機能をサポートしている。  
キーバリューストアでは、キーと値のペアでデータを保存し、高速に読み書きできる。  
ドキュメントストアでは、JSON のような半構造化データを保存し、柔軟なデータモデルをサポートできる。

#### 2.2 フルマネージドサービス

DynamoDB は、フルマネージドサービスであるため、ユーザーはデータベースのプロビジョニング、スケーリング、パッチ適用などの管理を行う必要はない。  
AWS が、これらの管理作業を自動的に行う。

#### 2.3 スケーラビリティ

DynamoDB は、ストレージ容量とスループットを自動的にスケーリングできる。  
これにより、トラフィックの変動に対応し、安定したパフォーマンスを提供できる。

#### 2.4 高い可用性

DynamoDB は、複数のアベイラビリティゾーンにデータを複製することで、高い可用性を実現している。  
これにより、ハードウェア障害やゾーン障害が発生した場合でも、アプリケーションの可用性を維持できる。

#### 2.5 グローバルテーブル

複数の AWS リージョン間でデータをレプリケーションし、グローバルに分散されたアプリケーションをサポートできる。  
これにより、リージョン障害が発生した場合でも、別のリージョンでアプリケーションを継続して利用できる。

#### 2.6 ACID トランザクション

複数のアイテムに対して、ACID（Atomicity, Consistency, Isolation, Durability）トランザクションをサポートしている。  
これにより、データの整合性を維持できる。

#### 2.7 統合性と拡張性

Amazon DynamoDB は、AWS Lambda, Amazon S3, Amazon Kinesis, AWS AppSync など、AWS の他のサービスと密接に統合されている。  
また、API を利用して、データの読み書きやテーブルの管理を自動化することもできる。

### 3. アーキテクチャおよび技術要素

1. ユーザーは、DynamoDB テーブルを作成し、プライマリーキーを定義。
2. アプリケーションは、DynamoDB API を使って、データの読み書き。
3. DynamoDB は、データを複数のストレージノードに分散し、自動的にスケーリング。
4. 必要に応じて、グローバルテーブルを有効にし、複数のリージョン間でデータレプリケーション。
5. DynamoDB は、データの耐久性と可用性を確保。

Amazon DynamoDB は、AWS のインフラ上に構築されており、高い可用性、スケーラビリティ、パフォーマンスを提供する。  
データベースのプロビジョニングや管理は AWS が行うため、ユーザーはインフラの管理を行う必要はない。

### 4. セキュリティと認証・認可

Amazon DynamoDB は、データのセキュリティを確保するために、以下の機能を提供する:

- **IAM 統合**: AWS Identity and Access Management (IAM) を利用して、DynamoDB へのアクセスを制御する。
- **データ暗号化**: データは転送中および保存時に暗号化される。
- **VPC エンドポイント**: VPC 内から DynamoDB にアクセスする際に、インターネットを経由せずにアクセスできる。
- **アクセス制御**: IAM ポリシーを通じて、ユーザーやグループごとに、DynamoDB テーブルの操作権限を詳細に制御できる。
- **監査ログ**: CloudTrail を通じて、DynamoDB の利用状況を監査できる。

これらのセキュリティ対策により、データの不正アクセスを防止し、機密情報を保護できる。

### 5. 料金形態

Amazon DynamoDB の料金は主に以下に基づく:

- **ストレージ**: テーブルで使用されたストレージ容量に応じて課金。
- **読み込み/書き込みキャパシティユニット (RCU/WCU)**: データ読み書きに必要なキャパシティユニットに応じて課金。
- **データ転送**: データ転送量に応じて課金。
- **バックアップと復元**: バックアップデータの保存容量とデータ復元量に応じて課金。

### 6. よくあるアーキテクチャ・設計パターン

Amazon DynamoDB は、様々なアプリケーションに利用できます。一般的なパターンは以下の通り:

- **Web アプリケーション**: Web アプリケーションのセッションデータ、ユーザーデータ、コンテンツなどを保存。
- **モバイルアプリケーション**: モバイルアプリケーションのユーザーデータ、ゲームデータ、セッションデータなどを保存。
- **ゲームアプリケーション**: ゲームのユーザーデータ、ゲーム状態、ランキングデータなどを保存。
- **IoT アプリケーション**: IoT デバイスから送信されたデータを保存し、リアルタイムで分析。
- **広告テクノロジー**: 広告表示に必要なデータやクリックデータなどを高速に保存、検索。
- **e コマース**: e コマースサイトの商品情報、顧客データ、注文履歴などを保存。

### 7. 設定・デプロイ手順（ハンズオン例）

1. AWS マネジメントコンソールから Amazon DynamoDB を開き、新しいテーブルを作成。
2. プライマリキーを定義し、テーブルの設定を構成。
3. DynamoDB コンソールまたは AWS CLI を使って、テーブルにデータを挿入。
4. API を使って、データを読み書き。
5. 必要に応じて、グローバルテーブルを有効にし、リージョン間のデータレプリケーションを設定。

### 8. 試験で問われやすいポイント

#### 8.1 キーバリューストアとドキュメントストア

- **機能**: キーと値のペアでデータを保存（キーバリューストア）、JSON のような半構造化データを保存（ドキュメントストア）。
- **利点**: 柔軟なデータモデルに対応。
- **試験対策**: 各ストレージ形式の特徴、利用ケースが問われる。

#### 8.2 フルマネージドサービス

- **管理**: データベースのプロビジョニング、スケーリング、パッチ適用などを AWS が担当。
- **利点**: ユーザーはインフラの管理が不要。
- **試験対策**: フルマネージドのメリット、管理範囲が問われる。

#### 8.3 スケーラビリティ

- **機能**: ストレージ容量とスループットを自動的にスケーリング。
- **目的**: トラフィックの変動に対応し、安定したパフォーマンスを提供。
- **試験対策**: 自動スケーリングの仕組み、重要性が問われる。

#### 8.4 高い可用性

- **実現方法**: 複数のアベイラビリティゾーンにデータを複製。
- **目的**: 障害発生時でもアプリケーションの可用性を維持。
- **試験対策**: 高可用性の仕組み、耐障害性が問われる。

#### 8.5 料金体系

- **課金対象**: ストレージ、読み込み/書き込みキャパシティユニット (RCU/WCU)、データ転送量、バックアップと復元。
- **最適化**: キャパシティユニットの適切な設定、不要なデータの削除がコスト削減に有効。
- **試験対策**: 料金体系、課金要素が問われる。

#### 8.6 類似・関連サービスとの比較

- **Amazon RDS**: リレーショナルデータベースサービス。DynamoDB は NoSQL データベース。
- **Amazon ElastiCache**: インメモリキャッシュサービス。DynamoDB は永続的なストレージサービス。

#### 8.7 試験で頻出となる具体的な問われ方と答え

- Q: Amazon DynamoDB は何を提供するサービス？
  - A: 高速かつ柔軟な NoSQL データベースサービスを提供。
- Q: Amazon DynamoDB は、どのようなデータモデルをサポートしているか？
  - A: キーバリューストアとドキュメントストアの両方の機能をサポートしている。
- Q: Amazon DynamoDB は、どのようにスケーリングするか？
  - A: ストレージ容量とスループットを自動的にスケーリングする。
- Q: Amazon DynamoDB は、どのように可用性を確保しているか？
  - A: 複数のアベイラビリティゾーンにデータを複製することで、高い可用性を実現している。
- Q: Amazon DynamoDB の料金はどのように計算されるか？
  - A: ストレージ、読み込み/書き込みキャパシティユニット (RCU/WCU)、データ転送量、バックアップと復元などに基づいて計算される。

---

## ElastiCache

### 1. サービス概要

Amazon ElastiCache は、AWS が提供するフルマネージドのインメモリデータストアサービスです。  
このサービスを利用することで、頻繁にアクセスされるデータをメモリにキャッシュすることで、アプリケーションの応答速度を向上させ、データベースへの負荷を軽減できます。  
ElastiCache は、Redis と Memcached の 2 つのエンジンをサポートしています。

主なユースケースとして、

- ウェブアプリケーションのセッション管理
- リアルタイム分析
- リーダーボード
- API キャッシュ
- データベースのホットデータキャッシュ

などが挙げられます。

### 2. 主な特徴と機能

#### 2.1 Redis と Memcached のサポート

ElastiCache は、Redis と Memcached の 2 つの人気のあるインメモリデータストアエンジンをサポートしています。  
これにより、アプリケーションの要件に応じて最適なエンジンを選択できます。

- **Redis**: 複雑なデータ構造（リスト、セット、ハッシュなど）や Pub/Sub 機能をサポート。
- **Memcached**: シンプルなキーバリューストアで、高スループットなキャッシュに最適。

#### 2.2 フルマネージドサービス

インフラのプロビジョニング、スケーリング、パッチ適用、バックアップなどの運用管理は AWS が自動で行います。  
これにより、開発者はデータベースの運用管理に煩わされることなく、アプリケーション開発に集中できます。

#### 2.3 スケーラビリティ

ElastiCache は、ストレージとコンピューティングリソースを個別にスケールできるため、アプリケーションの需要に合わせて柔軟にリソースを調整できます。  
水平スケーリング（ノード数の増減）と垂直スケーリング（インスタンスタイプの変更）をサポートしています。

#### 2.4 高い可用性

ElastiCache は、複数のアベイラビリティーゾーンにデータを分散して保存し、自動的にフェイルオーバーを処理します。  
これにより、高い可用性を実現し、システムのダウンタイムを最小限に抑えます。

#### 2.5 セキュリティ

ElastiCache は、データの暗号化、アクセス制御、ネットワーク分離などのセキュリティ機能を提供します。  
IAM によるアクセス制御、転送中のデータ暗号化、保存中のデータ暗号化、VPC 内でのプライベート接続をサポートしています。

- **IAM 連携**: AWS IAM を使用してアクセス制御と権限管理。
- **データ暗号化**: 転送中および保存中のデータを暗号化。
- **VPC サポート**: Amazon VPC 内でのプライベート接続。

#### 2.6 バックアップと復元

ElastiCache は、自動バックアップ機能を提供しており、データを定期的にバックアップできます。  
必要に応じて、バックアップからデータを復元できます。

#### 2.7 統合性

ElastiCache は、AWS の他のサービス（Amazon EC2, Amazon ECS, AWS Lambda など）と統合されており、様々なアプリケーションアーキテクチャに対応できます。  
AWS CloudWatch と連携してモニタリングを行うことができます。

### 3. アーキテクチャおよび技術要素

1. クライアントアプリケーションは、ElastiCache に接続し、データの読み書きを行う。
2. ElastiCache は、指定されたエンジン（Redis または Memcached）に基づいてインメモリデータストアを管理。
3. データは、必要に応じて複数ノードに分散して保存。
4. 読み取りリクエストは、キャッシュから応答。
5. 書き込みリクエストは、キャッシュにデータを保存。

ElastiCache は、フルマネージドサービスとして提供され、高い可用性、スケーラビリティ、セキュリティを内包しています。  
アプリケーションのパフォーマンスを向上させ、データベースへの負荷を軽減します。

### 4. セキュリティと認証・認可

セキュリティは ElastiCache の重要な要素です:

- **IAM によるアクセス制御**: AWS IAM を利用して、ElastiCache リソースへのアクセスを制御し、権限を管理。
- **データ暗号化**: 転送中および保存中のデータを暗号化し、データの機密性を保護。
- **VPC サポート**: Amazon VPC 内で ElastiCache を使用する場合、プライベート接続を確立。
- **認証**: Redis の AUTH コマンドや Memcached の認証メカニズムを利用して、アクセスを制御。
- **監査ログ**: AWS CloudTrail を利用して、API 呼び出しやリソース変更を記録。

これにより、データの安全性とコンプライアンスを確保できます。

### 5. 料金形態

Amazon ElastiCache の料金は主に以下に基づきます:

- **インスタンス料金**: キャッシュノードの実行時間に応じた従量課金。
- **データ転送料金**: データ転送量に応じた従量課金。
- **バックアップ料金**: 自動バックアップに利用されるストレージ量に応じた課金。

### 6. よくあるアーキテクチャ・設計パターン

一般的なパターンは以下の通りです:

- **ウェブアプリケーションのセッション管理**: ユーザーセッションデータを Redis に格納し、アプリケーションの応答速度を向上。
- **リアルタイム分析**: リアルタイムデータを Memcached にキャッシュし、高速なデータ分析を実現。
- **リーダーボード**: ゲームアプリケーションのランキングデータを Redis に格納し、高速なランキング表示を実現。
- **API キャッシュ**: API レスポンスを Memcached にキャッシュし、API サーバーへの負荷を軽減。
- **データベースのホットデータキャッシュ**: データベースのホットデータを Redis にキャッシュし、データベースへの負荷を軽減。

### 7. 設定・デプロイ手順（ハンズオン例）

1. AWS コンソールで ElastiCache クラスタを作成（Redis または Memcached）。
2. EC2 インスタンスから ElastiCache クラスタに接続。
3. キャッシュにデータを格納し、キャッシュからデータを取得。
4. 必要に応じて、スケーリングポリシーを設定し、スケールアップ/スケールダウンを実行。
5. CloudWatch でパフォーマンスメトリクスを監視。

### 8. 試験で問われやすいポイント

#### 8.1 Redis と Memcached のサポート

- **Redis の特徴**: 複雑なデータ構造、Pub/Sub 機能について理解。
- **Memcached の特徴**: シンプルなキーバリューストア、高スループットについて理解。
- **使い分け**: アプリケーションの要件に応じて適切なエンジンを選択する方法を理解。

#### 8.2 フルマネージドサービス

- **運用管理**: インフラのプロビジョニング、スケーリング、パッチ適用、バックアップなどが AWS に自動化されていることを理解。
- **開発への集中**: 開発者がデータベース運用に煩わされることなく、アプリケーション開発に集中できることを理解。

#### 8.3 スケーラビリティ

- **水平スケーリング**: ノード数を増減する方法について理解。
- **垂直スケーリング**: インスタンスタイプを変更する方法について理解。
- **柔軟なスケーリング**: アプリケーションの需要に合わせてリソースを調整する方法を理解。

#### 8.4 高い可用性

- **マルチ AZ**: 複数のアベイラビリティーゾーンにデータを分散して保存する方法を理解。
- **自動フェイルオーバー**: 自動フェイルオーバー機能で高い可用性を実現する方法を理解。

#### 8.5 セキュリティ

- **IAM**: IAM によるアクセス制御と権限管理について理解。
- **データ暗号化**: 転送中および保存中のデータを暗号化することについて理解。
- **VPC サポート**: VPC 内でのプライベート接続について理解。
- **認証**: Redis の AUTH コマンドや Memcached の認証メカニズムについて理解。

#### 8.6 料金体系

- **インスタンス料金**: キャッシュノードの実行時間による従量課金について理解。
- **データ転送料金**: データ転送量による従量課金について理解。
- **バックアップ料金**: 自動バックアップに利用されるストレージ量による課金について理解。

#### 8.7 類似・関連サービスとの比較

- **Amazon DynamoDB Accelerator (DAX)**: DynamoDB のキャッシュに特化。ElastiCache はより汎用的なキャッシュサービス。
- **Redis Enterprise Cloud**: Redis のフルマネージドサービス。ElastiCache は AWS プラットフォームに統合されたサービス。

#### 8.8 試験で頻出となる具体的な問われ方と答え

- Q: Amazon ElastiCache の主な用途は？
  - A: 頻繁にアクセスされるデータをメモリにキャッシュし、アプリケーションの応答速度を向上させること。
- Q: ElastiCache がサポートするエンジンは？
  - A: Redis と Memcached。
- Q: Redis と Memcached の違いは？
  - A: Redis は複雑なデータ構造、Memcached はシンプルなキーバリューストア。
- Q: ElastiCache のスケーリング方法の種類は？
  - A: 水平スケーリングと垂直スケーリング。
- Q: ElastiCache のセキュリティ対策は？
  - A: IAM によるアクセス制御、データ暗号化、VPC サポートなど。
- Q: ElastiCache の料金体系は？
  - A: インスタンス料金、データ転送料金、バックアップ料金に基づく従量課金。
- Q: ElastiCache と DAX の違いは？
  - A: DAX は DynamoDB に特化、ElastiCache は汎用的なキャッシュサービス。

---

## Keyspaces

### 1. サービス概要

Amazon Keyspaces (for Apache Cassandra) は、AWS が提供するフルマネージドのデータベースサービスで、Apache Cassandra との互換性があります。  
このサービスを利用することで、Cassandra のデータモデルと CQL（Cassandra Query Language）をそのまま利用でき、スケーラブルで可用性の高いデータベースを容易に構築できます。  
Keyspaces は、インフラの管理に煩わされることなく、アプリケーションの開発に集中できる環境を提供します。

主なユースケースとして、

- IoT データの格納
- リアルタイム分析
- モバイルアプリケーションのバックエンド
- 大規模な分散アプリケーションのデータストア

などが挙げられます。

### 2. 主な特徴と機能

#### 2.1 Apache Cassandra 互換性

Amazon Keyspaces は、Apache Cassandra のワイヤプロトコル、API、ドライバーをサポートしており、既存の Cassandra アプリケーションを大幅な変更なしに移行できます。  
これにより、開発者は Cassandra の知識をそのまま活用できます。

#### 2.2 フルマネージドサービス

インフラのプロビジョニング、スケーリング、パッチ適用、バックアップなどの運用管理は AWS が自動で行います。  
これにより、開発者はデータベースの運用管理に煩わされることなく、アプリケーション開発に集中できます。

#### 2.3 スケーラビリティとパフォーマンス

Keyspaces は、ストレージとコンピューティングリソースを個別にスケールできるため、アプリケーションの需要に合わせて柔軟にリソースを調整できます。  
高いスループットと低いレイテンシを実現し、大規模なアプリケーションにも対応できます。

#### 2.4 高い可用性と耐久性

Keyspaces は、複数のアベイラビリティーゾーンにデータを分散して保存し、自動的にフェイルオーバーを処理します。  
これにより、高い可用性と耐久性を実現し、データの損失を防ぎます。

#### 2.5 スキーマレスデータモデル

Keyspaces は、柔軟なスキーマレスデータモデルをサポートしており、データの変更に柔軟に対応できます。  
テーブル定義を変更せずに、新しいカラムを追加できます。

#### 2.6 CQL (Cassandra Query Language) サポート

Keyspaces は、Apache Cassandra で使用される CQL をサポートしています。  
これにより、既存の Cassandra アプリケーションのクエリをそのまま実行できます。

#### 2.7 セキュリティ

Keyspaces は、データの暗号化、アクセス制御、ネットワーク分離などのセキュリティ機能を提供します。  
IAM によるアクセス制御、転送中のデータ暗号化、保存中のデータ暗号化、VPC 内でのプライベート接続をサポートしています。

- **IAM 連携**: AWS IAM を使用してアクセス制御と権限管理。
- **データ暗号化**: 転送中および保存中のデータを暗号化。
- **VPC サポート**: Amazon VPC 内でのプライベート接続。

#### 2.8 統合性

Keyspaces は、AWS の他のサービス（Amazon S3, AWS Lambda, Amazon Kinesis など）と統合されており、様々なアプリケーションアーキテクチャに対応できます。  
AWS Glue と連携してデータの ETL 処理を行うことができます。

### 3. アーキテクチャおよび技術要素

1. クライアントアプリケーションは、Apache Cassandra 互換のドライバーを使用して Keyspaces に接続。
2. Keyspaces は、複数のアベイラビリティーゾーンにデータを分散して保存。
3. クライアントからの読み取り/書き込みリクエストを処理。
4. ストレージとコンピューティングリソースは、必要に応じて個別にスケーリング。
5. 自動バックアップ機能により、データを安全に保護。

Keyspaces は、フルマネージドサービスとして提供され、高い可用性、スケーラビリティ、耐久性を内包しています。  
Apache Cassandra の互換性により、既存の Cassandra アプリケーションを容易に移行できます。

### 4. セキュリティと認証・認可

セキュリティは Keyspaces の重要な要素です:

- **IAM によるアクセス制御**: AWS IAM を利用して、Keyspaces リソースへのアクセスを制御し、権限を管理。
- **データ暗号化**: 転送中および保存中のデータを暗号化し、データの機密性を保護。
- **VPC サポート**: Amazon VPC 内で Keyspaces を使用する場合、プライベート接続を確立。
- **監査ログ**: AWS CloudTrail を利用して、API 呼び出しやリソース変更を記録。

これにより、データの安全性とコンプライアンスを確保できます。

### 5. 料金形態

Amazon Keyspaces の料金は主に以下に基づきます:

- **読み取り/書き込みキャパシティ**: 読み取り/書き込み操作に必要なキャパシティに応じた課金。
- **ストレージ**: 保存されたデータ量に応じた課金。
- **データ転送**: データ転送量に応じた課金。

### 6. よくあるアーキテクチャ・設計パターン

一般的なパターンは以下の通りです:

- **IoT データの格納**: IoT デバイスから送信されるセンサーデータを格納し、リアルタイム分析に利用。
- **リアルタイム分析**: リアルタイムデータを収集、格納し、高速なクエリで分析。
- **モバイルアプリケーションのバックエンド**: モバイルアプリケーションのユーザーデータ、設定データ、コンテンツを格納。
- **大規模な分散アプリケーション**: 大規模な分散アプリケーションのデータストアとして利用。
- **セッション管理**: ウェブアプリケーションのセッションデータを格納し、高可用性を実現。

### 7. 設定・デプロイ手順（ハンズオン例）

1. AWS コンソールで Keyspaces のキースペースを作成。
2. Keyspaces のテーブルを作成し、スキーマを定義。
3. Apache Cassandra 互換のドライバーを使用して、Keyspaces に接続。
4. CQL を使用して、データの挿入、更新、削除、クエリを実行。
5. Keyspaces のパフォーマンスを監視。

### 8. 試験で問われやすいポイント

#### 8.1 Apache Cassandra 互換性

- **ワイヤプロトコル**: Apache Cassandra のワイヤプロトコルとの互換性について理解。
- **API**: Apache Cassandra の API との互換性について理解。
- **ドライバー**: Apache Cassandra のドライバーをそのまま利用できることを理解。

#### 8.2 フルマネージドサービス

- **運用管理**: インフラのプロビジョニング、スケーリング、パッチ適用、バックアップなどの運用管理が AWS に自動化されていることを理解。
- **開発への集中**: 開発者がデータベース運用に煩わされることなく、アプリケーション開発に集中できることを理解。

#### 8.3 スケーラビリティとパフォーマンス

- **リソーススケーリング**: ストレージとコンピューティングリソースを個別にスケーリングできることを理解。
- **高パフォーマンス**: 高いスループットと低いレイテンシを実現できることを理解。

#### 8.4 高い可用性と耐久性

- **マルチ AZ**: 複数アベイラビリティーゾーンにデータを分散して保存することを理解。
- **自動フェイルオーバー**: 自動フェイルオーバー機能で高い可用性を実現することを理解。

#### 8.5 スキーマレスデータモデル

- **柔軟なスキーマ**: スキーマレスであるため、データ構造の変更に柔軟に対応できることを理解。
- **カラムの追加**: テーブル定義を変更せずにカラムを追加できることを理解。

#### 8.6 CQL サポート

- **CQL**: Apache Cassandra で使用される CQL をサポートしていることを理解。
- **既存のクエリ**: 既存の Cassandra アプリケーションのクエリをそのまま実行できることを理解。

#### 8.7 セキュリティ

- **IAM**: IAM によるアクセス制御と権限管理について理解。
- **データ暗号化**: 転送中および保存中のデータを暗号化することについて理解。
- **VPC サポート**: VPC 内でのプライベート接続について理解。

#### 8.8 料金体系

- **キャパシティ料金**: 読み取り/書き込みに必要なキャパシティに応じた課金について理解。
- **ストレージ料金**: 保存されたデータ量による課金について理解。
- **データ転送**: データ転送量に応じた課金について理解。

#### 8.9 類似・関連サービスとの比較

- **Apache Cassandra**: オープンソースの分散データベース。Keyspaces は Cassandra 互換のフルマネージドサービス。
- **Amazon DynamoDB**: Key-Value 型データベース。Keyspaces はカラムナ型データベース。

#### 8.10 試験で頻出となる具体的な問われ方と答え

- Q: Amazon Keyspaces の主な用途は？
  - A: Apache Cassandra 互換のフルマネージドデータベースサービス。
- Q: Keyspaces が互換性を持つデータベースは？
  - A: Apache Cassandra。
- Q: Keyspaces のフルマネージドとは？
  - A: インフラ運用が AWS に自動化されていること。
- Q: Keyspaces で利用できるクエリ言語は？
  - A: CQL (Cassandra Query Language)。
- Q: Keyspaces のセキュリティ対策は？
  - A: IAM によるアクセス制御、データ暗号化、VPC サポートなど。
- Q: Keyspaces の料金体系は？
  - A: 読み書きキャパシティ、ストレージ、データ転送に応じた課金。
    -Q: Keyspaces と DynamoDB の違いは？
  - A: Keyspaces はカラムナ型、DynamoDB は Key-Value 型。

---

## Neptune

### 1. サービス概要

Amazon Neptune は、高速かつ信頼性の高いグラフデータベースサービスです。  
ユーザーは、高度に接続されたデータを保存、管理、クエリでき、ソーシャルネットワーク、レコメンデーションエンジン、ナレッジグラフなどのアプリケーションに適しています。  
Neptune は、フルマネージドサービスであり、スケーラブルなグラフデータベース環境を構築し、複雑なデータ関係を効率的に処理できます。

主なユースケースとして、

- ソーシャルネットワーク
- レコメンデーションエンジン
- ナレッジグラフ
- 不正検知
- ID とアクセス管理
- ライフサイエンス

などが挙げられます。  
Amazon Neptune は、これらのユースケースに対応するための様々な機能と、AWS の他のサービスとの統合を提供します。

### 2. 主な特徴と機能

#### 2.1 グラフデータベース

Neptune は、グラフデータベースを提供し、ノード（頂点）とエッジ（辺）で構成されるグラフ構造でデータを表現します。  
これにより、関係性が強いデータを効率的に管理し、複雑なクエリを高速に実行できます。

#### 2.2 フルマネージドサービス

Neptune は、フルマネージドサービスであるため、ユーザーはデータベースのプロビジョニング、スケーリング、パッチ適用などの管理を行う必要はありません。  
AWS が、これらの管理作業を自動的に行います。

#### 2.3 スケーラビリティ

Neptune は、ストレージ容量とスループットを自動的にスケーリングできます。  
これにより、データ量の増加やトラフィックの変動に対応し、安定したパフォーマンスを提供できます。

#### 2.4 高い可用性

Neptune は、複数のアベイラビリティゾーンにデータを複製することで、高い可用性を実現しています。  
これにより、ハードウェア障害やゾーン障害が発生した場合でも、アプリケーションの可用性を維持できます。

#### 2.5 Gremlin と SPARQL

Apache TinkerPop Gremlin と SPARQL という、グラフデータベースの標準的なクエリ言語をサポートしています。  
これにより、柔軟なクエリでデータを検索できます。

#### 2.6 ACID トランザクション

Neptune は、ACID（Atomicity, Consistency, Isolation, Durability）トランザクションをサポートしています。  
これにより、データの整合性を維持できます。

#### 2.7 統合性と拡張性

Amazon Neptune は、Amazon SageMaker, AWS Lambda, Amazon S3 などの AWS の他のサービスと密接に統合されています。  
また、API を利用して、グラフデータの読み書きやデータベースの管理を自動化することもできます。

### 3. アーキテクチャおよび技術要素

1. ユーザーは、Neptune データベースインスタンスを作成。
2. アプリケーションは、Gremlin または SPARQL クエリを使用して、グラフデータを読み書き。
3. Neptune は、グラフデータを複数のストレージノードに分散し、自動的にスケーリング。
4. 必要に応じて、リードレプリカを作成し、読み込みのスケーラビリティを向上。
5. Neptune は、データの耐久性と可用性を確保。

Amazon Neptune は、AWS のインフラ上に構築されており、高い可用性、スケーラビリティ、パフォーマンスを提供します。  
データベースのプロビジョニングや管理は AWS が行うため、ユーザーはインフラの管理を行う必要はありません。

### 4. セキュリティと認証・認可

Amazon Neptune は、データのセキュリティを確保するために、以下の機能を提供します:

- **IAM 統合**: AWS Identity and Access Management (IAM) を利用して、Neptune へのアクセスを制御します。
- **VPC 内での実行**: Neptune データベースインスタンスは Virtual Private Cloud (VPC) 内で実行され、ネットワーク隔離を実現。
- **データ暗号化**: データは転送中および保存時に暗号化されます。
- **アクセス制御**: IAM ポリシーを通じて、ユーザーやグループごとに、Neptune データベースの操作権限を詳細に制御できます。
- **監査ログ**: CloudTrail を通じて、Neptune の利用状況を監査できます。

これらのセキュリティ対策により、グラフデータへの不正アクセスを防止し、機密情報を保護できます。

### 5. 料金形態

Amazon Neptune の料金は主に以下に基づきます:

- **データベースインスタンス**: データベースインスタンスの利用時間とインスタンスタイプに応じた料金。
- **ストレージ**: データベースで使用されたストレージ容量に応じて課金。
- **I/O**: データベースへの I/O リクエスト数に応じて課金。
- **バックアップストレージ**: バックアップデータの保存容量に応じて課金。
- **データ転送**: データ転送量に応じて課金。

### 6. よくあるアーキテクチャ・設計パターン

Amazon Neptune は、様々なグラフデータを利用するアプリケーションに利用できます。  
一般的なパターンは以下の通りです:

- **ソーシャルネットワーク**: ソーシャルネットワークのユーザー、関係性、アクティビティなどをグラフ構造で表現し、友人関係の発見やコミュニティ分析に利用。
- **レコメンデーションエンジン**: ユーザーの行動履歴や嗜好に基づいて、商品やコンテンツを推奨するためにグラフデータを利用。
- **ナレッジグラフ**: 知識をグラフ構造で表現し、複雑な情報を整理、検索、分析。
- **不正検知**: 取引データやユーザーデータをグラフ構造で分析し、不正行為を検出。
- **ID とアクセス管理**: アクセス権限やロールをグラフ構造で管理し、セキュリティポリシーの適用を容易化。
- **ライフサイエンス**: ゲノムデータ、タンパク質相互作用、薬品情報をグラフ構造で表現し、研究開発を加速。

### 7. 設定・デプロイ手順（ハンズオン例）

1. AWS マネジメントコンソールから Amazon Neptune を開き、新しいデータベースインスタンスを作成。
2. VPC、サブネット、セキュリティグループなどのネットワーク設定を構成。
3. Gremlin または SPARQL クライアントを使用して、Neptune データベースに接続。
4. グラフデータをインポートし、クエリを実行。
5. 必要に応じて、リードレプリカを作成し、読み込みのスケーラビリティを向上。

### 8. 試験で問われやすいポイント

#### 8.1 グラフデータベース

- **構造**: ノード（頂点）とエッジ（辺）で構成されるグラフ構造。
- **利用**: 関係性が強いデータを効率的に管理。
- **試験対策**: グラフデータベースの基本概念、利用ケースが問われる。

#### 8.2 フルマネージドサービス

- **管理**: データベースのプロビジョニング、スケーリング、パッチ適用などを AWS が担当。
- **利点**: ユーザーはインフラの管理が不要。
- **試験対策**: フルマネージドのメリット、管理範囲が問われる。

#### 8.3 スケーラビリティ

- **機能**: ストレージ容量とスループットを自動的にスケーリング。
- **目的**: データ量の増加やトラフィックの変動に対応。
- **試験対策**: 自動スケーリングの仕組み、メリットが問われる。

#### 8.4 高い可用性

- **実現方法**: 複数のアベイラビリティゾーンにデータを複製。
- **目的**: 障害発生時でもアプリケーションの可用性を維持。
- **試験対策**: 高可用性の仕組み、リージョン間のレプリケーションが問われる。

### 8.5 クエリ言語

- **種類**: Apache TinkerPop Gremlin、SPARQL。
- **利用**: グラフデータの検索。
- **試験対策**: 各クエリ言語の特徴、利用ケースが問われる。

#### 8.6 料金体系

- **課金対象**: データベースインスタンス、ストレージ、I/O、バックアップストレージ、データ転送量。
- **最適化**: 不要なデータ転送を削減し、適切なインスタンスタイプを選択することがコスト削減に有効。
- **試験対策**: 料金体系、課金対象が問われる。

#### 8.7 類似・関連サービスとの比較

- **Amazon RDS**: リレーショナルデータベースサービス。Neptune はグラフデータベース。
- **Amazon DynamoDB**: NoSQL データベースサービス。Neptune は関係性を重視したグラフデータベース。

#### 8.8 試験で頻出となる具体的な問われ方と答え

- Q: Amazon Neptune は何を提供するサービスですか？
  - A: 高速かつ信頼性の高いグラフデータベースサービスを提供します。
- Q: Amazon Neptune は、どのようなデータモデルでデータを表現しますか？
  - A: ノード（頂点）とエッジ（辺）で構成されるグラフ構造でデータを表現します。
- Q: Amazon Neptune は、どのようなクエリ言語をサポートしていますか？
  - A: Apache TinkerPop Gremlin と SPARQL というグラフデータベースの標準的なクエリ言語をサポートしています。
- Q: Amazon Neptune は、どのように可用性を確保していますか？
  - A: 複数のアベイラビリティゾーンにデータを複製することで、高い可用性を実現しています。
- Q: Amazon Neptune の料金はどのように計算されますか？
  - A: データベースインスタンスの利用時間、ストレージ容量、I/O リクエスト数、バックアップストレージ、データ転送量などに基づいて計算されます。

---

## RDS

### 1. サービス概要

Amazon RDS（Relational Database Service）は、AWS が提供するフルマネージドなリレーショナルデータベースサービスです。  
MySQL、PostgreSQL、MariaDB、Oracle、Microsoft SQL Server、Amazon Aurora など、複数のデータベースエンジンを選択でき、データベースのセットアップ・管理・スケーリングを簡素化します。

主なユースケースとして、

- Web アプリケーションのメインデータベース
- 社内システムのリフト＆シフト（オンプレからの移行）
- 開発/テスト環境

などが挙げられます。  
インフラ管理を AWS に任せることで、開発チームはアプリケーションロジックに集中できます。

### 2. 主な特徴と機能

#### 2.1 マネージドで簡易的な運用

RDS は OS や DB ソフトウェアのインストール、パッチ適用、バックアップ、自動フェイルオーバーなどを AWS が自動化して管理します。  
手動でのアップデート作業や冗長化構成の構築が不要になるため、運用負荷を大幅に削減できます。

#### 2.2 バックアップとリカバリ

スナップショットおよびポイントインタイムリカバリをサポートし、バックアップウィンドウを自動スケジュールできます。  
自動スナップショットの保持期間を設定し、過去の任意時点までデータベースを巻き戻せるため、障害時のリカバリが容易です。

#### 2.3 マルチ AZ 配置とレプリケーション

マルチ AZ オプションを有効にすると、プライマリ DB の変更が同期的に別 AZ のスタンバイ DB へレプリケーションされ、障害時には自動的にスタンバイが昇格してフェイルオーバーします。  
また、リードレプリカを作成し、読み込み負荷を分散する構成も可能です（エンジンによって異なる）。

#### 2.4 スケーラビリティ

需要の増減に合わせて、DB インスタンスタイプやストレージ容量を変更できます。  
手動スケールアップ/ダウンはコンソールや CLI から行い、自動ストレージスケーリング機能をサポートするエンジン（Aurora など）も存在します。

#### 2.5 多彩なエンジンサポート

RDS は多様な RDB エンジンを提供し、既存の SQL 知識やツールを活かした移行が容易です。  
例: MySQL、MariaDB、PostgreSQL、Oracle Database、SQL Server、Aurora など。

### 3. アーキテクチャおよび技術要素

1. RDS インスタンス（プライマリ）を作成し、VPC やセキュリティグループを設定
2. マルチ AZ オプションを有効にすると、スタンバイインスタンスが自動作成される
3. 読み取り性能の拡張が必要な場合、リードレプリカを追加（MySQL、PostgreSQL 等対応エンジン）
4. 自動バックアップやスナップショットが定期的に取得され、障害時には Point-in-Time リカバリ
5. フェイルオーバーやメンテナンスは AWS によってマネージドされる

このように、オンプレミスで必要だった多くの運用作業（ハードウェア調達、OS 管理、ソフトウェアパッチ等）を AWS に任せつつ、高可用性とスケーラブルな RDB を利用できます。

### 4. セキュリティと認証・認可

RDS では以下のセキュリティモデルを利用できます:

- **VPC 内配置**: インスタンスをプライベートサブネットで保護し、セキュリティグループで通信を制御
- **暗号化**: KMS を利用した暗号化をオプションとして有効化し、スナップショットやバックアップも含めた保護
- **AWS IAM 連携**: IAM Database Authentication（MySQL、PostgreSQL 対応）で IAM ユーザーを DB 認証に利用可能
- **ログ監査**: エンジンごとのエラーログ、スロークエリログなどを CloudWatch Logs に転送し、監査しやすくする

### 5. 料金形態

RDS の料金は以下に基づきます:

- **インスタンスタイプ**: 選択する CPU/メモリ性能と稼働時間の従量課金
- **ストレージ**: プロビジョンド IOPS、汎用 SSD などのタイプと容量に応じた課金
- **IOPS**: 高速ストレージモードを選択時、指定した IOPS に応じて追加コスト
- **データ転送料**: リージョン外への転送やクロスリージョンレプリカで発生する通信料金

### 6. よくあるアーキテクチャ・設計パターン

RDS を活用するアーキテクチャ上のパターンは下記の通りです:

- **マルチ AZ で高可用性**: プライマリ＆スタンバイ構成でフェイルオーバー対応
- **リードレプリカで読み込み分散**: 運用報告ダッシュボードや分析クエリをレプリカへ振り分け
- **サーバーレスアプリ**: Lambda や API Gateway から RDS へ直接接続（VPC 内）し、小規模アプリを構築
- **オンプレとのハイブリッド**: Direct Connect や VPN を使い、オンプレシステムの DB を RDS へ移行またはレプリケーション

### 7. 設定・デプロイ手順（ハンズオン例）

1. AWS コンソールで「RDS」を開き、「データベースの作成」をクリック
2. データベースエンジンを選択（例: MySQL、PostgreSQL など）、テンプレート（Dev/Test、Production）を指定
3. インスタンスタイプやストレージサイズを選択し、マルチ AZ オプションを ON にするか決める
4. VPC、サブネットグループ、セキュリティグループを設定し、パブリックアクセスの可否を指定
5. DB インスタンス識別子、マスターユーザー名/パスワードを入力して「作成」
6. 作成後、エンドポイントが発行されるのでクライアントやアプリケーションから接続テスト

### 8. 試験で問われやすいポイント

#### 8.1 マルチ AZ とリードレプリカの違い

- **マルチ AZ**: 同期的にスタンバイへレプリケーションし、障害時のフェイルオーバーを提供
- **リードレプリカ**: 非同期的にレプリケーションし、読み取り負荷を分散。障害時の自動昇格はエンジンによって異なる

#### 8.2 セキュリティグループとネットワーク構成

- **VPC 内**: パブリックアクセスをオフにすると安全性向上
- **セキュリティグループ**: アプリサーバのみが DB ポートにアクセスできるよう制限
- **IAM DB 認証**: 各ユーザー固有の IAM 認証で、DB ユーザー管理を簡素化

#### 8.3 バックアップとリストア

- **自動バックアップウィンドウ**: 指定時間にスナップショットを取得
- **Point-in-Time リカバリ**: 障害発生時に過去の任意時点へロールバック
- **手動スナップショット**: 特定の状態を保持するためのスナップショット

#### 8.4 スケーリングと性能調整

- **インスタンスタイプ変更**: CPU/メモリ性能をアップダウン
- **ストレージ増加**: スナップショット無しで拡張が可能（エンジンによるが拡張が容易）
- **パラメータグループ**: DB 固有の設定（例: max_connections など）を一括管理

#### 8.5 料金とコスト最適化

- **リザーブドインスタンス**: 長期利用なら 1 ～ 3 年の予約でコスト削減
- **Auto Scaling Storage**: Aurora など一部エンジンでは容量を自動調整し、過剰プロビジョニングを防ぐ
- **リードレプリカ最適化**: 不要なレプリカを作りすぎないように管理

#### 8.6 試験で頻出となる具体的な問われ方と答え

- Q: RDS で高可用性を実現するには？
  - A: マルチ AZ 配置を有効にして、プライマリ障害時にはスタンバイへ自動フェイルオーバー。
- Q: 読み取り負荷を分散したい場合は？
  - A: リードレプリカを作成し、アプリ側で読み込みトラフィックを分散。
- Q: バックアップで過去に戻すには？
  - A: ポイントインタイムリカバリ（PITR）を使い、指定日時の状態に復元。
- Q: パブリックアクセスを有効にするリスクは？
  - A: インターネットから直接 DB にアクセス可能になるため、基本的には安全な VPC 内運用を推奨。
- Q: MySQL/PostgreSQL で IAM Database Authentication を使うメリットは？
  - A: DB ユーザー管理を IAM で一元管理でき、パスワードローテーションも容易。

---

## Redshift

### 1. サービス概要

Amazon Redshift は、大規模なデータウェアハウスを構築し、分析クエリを実行するためのフルマネージドのクラウドサービスです。  
ユーザーは、ペタバイト規模の構造化データを保存し、複雑な分析クエリを高速に実行できます。  
Redshift は、ビジネスインテリジェンス（BI）、データ分析、レポート作成などのユースケースに対応するための、スケーラビリティ、パフォーマンス、セキュリティを提供します。

主なユースケースとして、

- データウェアハウスの構築
- ビジネスインテリジェンス（BI）
- データ分析
- データマイニング
- レポート作成
- ダッシュボード作成

などが挙げられます。  
Amazon Redshift は、これらのユースケースに対応するための様々な機能と、AWS の他のサービスとの統合を提供します。

### 2. 主な特徴と機能

#### 2.1 ペタバイト規模のデータウェアハウス

Redshift は、ペタバイト規模の構造化データを保存できるデータウェアハウスを提供します。  
これにより、大量のデータを効率的に管理し、分析できます。

#### 2.2 列指向ストレージ

データを列形式で保存することで、分析クエリのパフォーマンスを向上させます。  
列指向ストレージは、特定の列のみを読み取る場合に、ディスク I/O を削減し、高速なクエリ処理を可能にします。

#### 2.3 大規模並列処理 (MPP)

Redshift は、MPP アーキテクチャを採用しており、複数のコンピューティングノードでクエリを並列処理します。  
これにより、大規模なデータセットに対する複雑なクエリを高速に実行できます。

#### 2.4 SQL ベースのクエリ

Redshift は、ANSI SQL をサポートしており、ユーザーは使い慣れた SQL クエリを使用してデータを分析できます。  
これにより、既存の SQL スキルを活かし、データ分析を効率化できます。

#### 2.5 BI ツールとの連携

Tableau, Power BI, QuickSight などの様々なビジネスインテリジェンス（BI）ツールと連携できます。  
これにより、データを可視化し、インタラクティブなダッシュボードを作成できます。

#### 2.6 スケーラビリティ

Redshift は、ストレージ容量とコンピューティングリソースを柔軟にスケーリングできます。  
これにより、データ量の増加やクエリ負荷の変動に対応できます。

#### 2.7 統合性と拡張性

Amazon Redshift は、Amazon S3, AWS Glue, Amazon Kinesis, AWS Lambda などの AWS の他のサービスと密接に統合されています。  
また、API を利用して、データベースの管理やデータ分析を自動化することもできます。

### 3. アーキテクチャおよび技術要素

1. ユーザーは、AWS マネジメントコンソールまたは API を通じて、Redshift クラスターを作成。
2. Redshift は、S3、Glue、Kinesis などからデータを取り込み、データベースに保存。
3. ユーザーは、SQL クライアントや BI ツールを使って、データをクエリ。
4. Redshift は、クエリを並列処理し、結果を返却。
5. 必要に応じて、クラスターのスケーリングやバックアップを実行。

Amazon Redshift は、AWS のインフラ上に構築されており、高い可用性とスケーラビリティを提供します。  
データベースのプロビジョニングや管理は AWS が行うため、ユーザーはインフラの管理を行う必要はありません。

### 4. セキュリティと認証・認可

Amazon Redshift は、データセキュリティを確保するために、以下の機能を提供します:

- **IAM 統合**: AWS Identity and Access Management (IAM) を利用して、Redshift へのアクセスを制御します。
- **VPC 内での実行**: Redshift クラスターは Virtual Private Cloud (VPC) 内で実行され、ネットワーク隔離を実現。
- **データ暗号化**: データは転送中および保存時に暗号化されます。
- **アクセス制御**: IAM ポリシーを通じて、ユーザーやグループごとに、Redshift データベースの操作権限を詳細に制御できます。
- **監査ログ**: CloudTrail を通じて、Redshift の利用状況を監査できます。

これらのセキュリティ対策により、データベースとそのデータを安全に保護します。

### 5. 料金形態

Amazon Redshift の料金は主に以下に基づきます:

- **コンピューティングノード**: クラスターを構成するノードのタイプと数に応じて課金。
- **ストレージ**: データベースで使用されたストレージ容量に応じて課金。
- **バックアップ**: バックアップデータの保存容量に応じて課金。
- **データ転送**: データ転送量に応じて課金。

### 6. よくあるアーキテクチャ・設計パターン

Amazon Redshift は、様々なデータ分析に利用できます。  
一般的なパターンは以下の通りです:

- **データウェアハウスの構築**: 様々なソースからのデータを集約し、Redshift に保存。
- **ビジネスインテリジェンス (BI)**: Redshift に保存されたデータを BI ツールで分析し、ビジネスインサイトを抽出。
- **データ分析**: 大量のデータを Redshift に保存し、SQL クエリで分析。
- **データマイニング**: 大規模なデータセットからパターンや関連性を発見。
- **レポート作成**: 定期的なレポートを作成し、ビジネスの状況を把握。
- **ダッシュボード作成**: データの可視化のために、ダッシュボードを作成し、リアルタイムでデータを表示。

### 7. 設定・デプロイ手順（ハンズオン例）

1. AWS マネジメントコンソールから Amazon Redshift を開き、新しいクラスターを作成。
2. VPC、サブネット、セキュリティグループなどのネットワーク設定を構成。
3. データベース名、ポート番号、認証情報などのデータベース設定を構成。
4. クライアントツール（SQL Workbench/J など）を用いて、Redshift に接続。
5. SQL クエリを実行し、データを分析。
6. 必要に応じて、クラスターのサイズを変更したり、バックアップを実行。

### 8. 試験で問われやすいポイント

#### 8.1 ペタバイト規模のデータウェアハウス

- **機能**: 大量の構造化データを保存。
- **利用**: 大規模なデータ分析に利用。
- **試験対策**: データウェアハウスの基本概念、Redshift の容量が問われる。

#### 8.2 列指向ストレージ

- **形式**: データを列形式で保存。
- **利点**: 分析クエリのパフォーマンスを向上。
- **試験対策**: 列指向ストレージの利点、効果が問われる。

#### 8.3 大規模並列処理 (MPP)

- **アーキテクチャ**: 複数のコンピューティングノードでクエリを並列処理。
- **目的**: 大規模なデータセットに対する複雑なクエリを高速に実行。
- **試験対策**: MPP の仕組み、メリットが問われる。

#### 8.4 SQL ベースのクエリ

- **対応**: ANSI SQL。
- **利点**: 使い慣れた SQL でデータ分析が可能。
- **試験対策**: SQL クエリの利用、Redshift で利用できる関数が問われる。

#### 8.5 料金体系

- **課金対象**: コンピューティングノードの利用時間、ストレージ、バックアップ、データ転送量。
- **最適化**: 不要なデータの削減、適切なノードタイプを選択し、コストを最適化。
- **試験対策**: 料金体系、課金対象が問われる。

#### 8.6 類似・関連サービスとの比較

- **Amazon RDS**: リレーショナルデータベースサービス。Redshift はデータ分析に特化。
- **Amazon Athena**: S3 上のデータを SQL で分析するサービス。Redshift はデータウェアハウスに特化。

#### 8.7 試験で頻出となる具体的な問われ方と答え

- Q: Amazon Redshift は何を提供するサービスですか？
  - A: 大規模なデータウェアハウスを構築し、分析クエリを実行するためのフルマネージドのクラウドサービスです。
- Q: Amazon Redshift は、どのようにデータを保存しますか？
  - A: 列形式でデータを保存します。
- Q: Amazon Redshift は、どのようにクエリを高速化しますか？
  - A: 大規模並列処理（MPP）アーキテクチャを採用し、複数のコンピューティングノードでクエリを並列処理します。
- Q: Amazon Redshift は、どのようなクエリ言語をサポートしていますか？
  - A: ANSI SQL をサポートしています。
- Q: Amazon Redshift の料金はどのように計算されますか？
  - A: コンピューティングノードの利用時間、ストレージ、バックアップ、データ転送量などに基づいて計算されます。
