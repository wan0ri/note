---
title: コンテナ
---

## Elastic Container Registry (ECR)

### 1. サービス概要

Amazon Elastic Container Registry (ECR) は、コンテナイメージを保存、管理、デプロイするためのフルマネージドのコンテナレジストリサービスである。  
開発者は、Docker イメージなどのコンテナイメージをプライベートなレジストリに保存し、安全にアクセス、共有、デプロイできる。  
ECR は、コンテナイメージのストレージ、スケーラビリティ、セキュリティを提供し、コンテナベースのアプリケーション開発とデプロイメントを容易にする。

主なユースケースとして、

- Docker コンテナイメージの保存と共有
- コンテナベースのアプリケーションのデプロイ
- CI/CD パイプラインでのコンテナイメージの管理
- マイクロサービスアーキテクチャの構築

などが挙げられる。  
Amazon ECR は、これらのユースケースに対応するための様々な機能と、AWS の他のサービスとの統合を提供する。

### 2. 主な特徴と機能

#### 2.1 プライベートコンテナレジストリ

ECR は、プライベートなコンテナイメージレジストリを提供する。  
開発者は、自分のコンテナイメージを、自分の AWS アカウント内のプライベートなレジストリに保存し、安全に管理できる。

#### 2.2 パブリックコンテナレジストリ

ECR Public Registry を使用すると、誰でもアクセスできるパブリックなコンテナイメージを公開できる。  
これにより、コンテナイメージをコミュニティに共有したり、公開されているコンテナイメージを簡単に利用できる。

#### 2.3 Docker イメージのサポート

ECR は、Docker イメージをサポートしており、Docker CLI や Docker API を使って、コンテナイメージをプッシュ/プルできる。  
Docker 環境とシームレスに連携できる。

#### 2.4 イメージスキャン

コンテナイメージの脆弱性を自動的にスキャンできる。  
脆弱性が検出された場合、アラートを通知し、脆弱性への対応を促する。

#### 2.5 アクセス制御

IAM ポリシーを使用して、コンテナイメージへのアクセスを制御できる。  
特定のユーザーやグループに対して、コンテナイメージのプッシュ、プル、削除などの権限を付与できる。

#### 2.6 イメージライフサイクルポリシー

イメージライフサイクルポリシーを使用して、古いコンテナイメージを自動的に削除できる。  
これにより、不要なイメージを削除し、ストレージコストを削減できる。

#### 2.7 統合性と拡張性

Amazon ECR は、AWS の他のサービス（Amazon ECS、Amazon EKS、AWS CodeBuild、AWS CodePipeline など）と密接に統合されており、コンテナベースのアプリケーション開発とデプロイメントを効率的に行える。  
また、API を利用して、コンテナイメージの管理を自動化することもできる。

### 3. アーキテクチャおよび技術要素

1. 開発者は、Docker CLI や Docker API を使って、コンテナイメージを Amazon ECR にプッシュ。
2. ECR は、コンテナイメージを安全に保存。
3. コンテナオーケストレーションサービス（ECS, EKS）や AWS CodeBuild などのサービスが、ECR からコンテナイメージをプル。
4. コンテナイメージを使って、アプリケーションをデプロイ。

Amazon ECR は、AWS のインフラ上に構築されており、高い可用性とスケーラビリティを提供する。  
コンテナイメージの保存や管理は AWS が行うため、ユーザーはインフラの管理を行う必要はない。

### 4. セキュリティと認証・認可

Amazon ECR は、コンテナイメージのセキュリティを確保するために、以下の機能を提供する:

- **IAM 統合**: AWS Identity and Access Management (IAM) を利用して、ECR へのアクセスを制御する。
- **VPC エンドポイント**: VPC 内から ECR へアクセスする際に、インターネットを経由せずにアクセスできる。
- **データ暗号化**: コンテナイメージは転送中および保存時に暗号化される。
- **イメージスキャン**: コンテナイメージの脆弱性を自動的にスキャンし、セキュリティリスクを軽減。
- **アクセス制御**: IAM ポリシーで、コンテナイメージのプッシュ、プル、削除などの権限を制御できる。

これらのセキュリティ対策により、コンテナイメージとそのデータを安全に保護する。

### 5. 料金形態

Amazon ECR の料金は主に以下に基づきる:

- **ストレージ**: 保存したコンテナイメージのストレージ容量に応じて課金。
- **データ転送**: コンテナイメージをプルする際に発生するデータ転送量に応じて課金。
- **イメージスキャン**: イメージスキャン機能を利用する場合、追加料金が発生。

### 6. よくあるアーキテクチャ・設計パターン

Amazon ECR は、様々なコンテナベースのアプリケーション開発に利用できる。  
一般的なパターンは以下の通りである:

- **Docker コンテナイメージの保存と共有**: Docker コンテナイメージをプライベートなレジストリに保存し、チームで共有。
- **コンテナベースのアプリケーションのデプロイ**: Amazon ECS や Amazon EKS でコンテナベースのアプリケーションをデプロイし、ECR からコンテナイメージをプル。
- **CI/CD パイプラインでのコンテナイメージの管理**: AWS CodeBuild や AWS CodePipeline でコンテナイメージをビルドし、ECR にプッシュ。
- **マイクロサービスアーキテクチャ**: マイクロサービスごとにコンテナイメージを管理し、ECR で一元管理。
- **コンテナイメージの脆弱性管理**: イメージスキャン機能を利用し、コンテナイメージの脆弱性を定期的にチェック。

### 7. 設定・デプロイ手順（ハンズオン例）

1. AWS マネジメントコンソールから Amazon ECR を開き、新しいリポジトリを作成。
2. Docker CLI で AWS にログイン。
3. Docker イメージをビルドし、作成したリポジトリにタグ付け。
4. Docker CLI を使って、コンテナイメージを ECR にプッシュ。
5. コンテナオーケストレーションサービス（ECS, EKS）や AWS CodeBuild などのサービスから、ECR のコンテナイメージをプルし、デプロイ。

### 8. 試験で問われやすいポイント

#### 8.1 プライベートコンテナレジストリ

- **機能**: プライベートなコンテナイメージを保存し、安全に管理。
- **利点**: 外部からのアクセスを制限し、セキュリティを強化。
- **試験対策**: プライベートレジストリの利点、アクセス制御が問われる。

#### 8.2 パブリックコンテナレジストリ

- **機能**: パブリックなコンテナイメージを公開。
- **利点**: コンテナイメージをコミュニティに共有、公開されているイメージを簡単に利用。
- **試験対策**: パブリックレジストリの利点、利用方法が問われる。

#### 8.3 Docker イメージのサポート

- **連携**: Docker CLI、Docker API。
- **操作**: Docker イメージのプッシュ、プル。
- **試験対策**: Docker との連携方法、Docker コマンドが問われる。

#### 8.4 イメージスキャン

- **機能**: コンテナイメージの脆弱性を自動的にスキャン。
- **目的**: セキュリティリスクを軽減。
- **試験対策**: イメージスキャンの機能、脆弱性対応が問われる。

#### 8.5 アクセス制御

- **利用サービス**: IAM ポリシー。
- **対象**: コンテナイメージのプッシュ、プル、削除などの権限。
- **試験対策**: IAM ポリシーの設定、アクセス制御の方法が問われる。

#### 8.6 イメージライフサイクルポリシー

- **機能**: 古いコンテナイメージを自動的に削除。
- **目的**: ストレージコストを削減。
- **試験対策**: ライフサイクルポリシーの設定、削除ルールが問われる。

#### 8.7 料金体系

- **課金対象**: ストレージ容量、データ転送量、イメージスキャン機能。
- **最適化**: 不要なイメージの削除、イメージサイズの最適化がコスト削減に有効。

#### 8.8 類似・関連サービスとの比較

- **Docker Hub**: パブリックなコンテナイメージを共有するためのプラットフォーム。ECR は AWS に特化したプライベートレジストリ。
- **Amazon S3**: オブジェクトストレージサービス。ECR はコンテナイメージの保存と管理に特化。

#### 8.9 試験で頻出となる具体的な問われ方と答え

- Q: Amazon ECR は何を提供するサービスか？
  - A: コンテナイメージを保存、管理、デプロイするためのフルマネージドのコンテナレジストリサービスである。
- Q: Amazon ECR でサポートされているコンテナイメージは何か？
  - A: Docker イメージをサポートしている。
- Q: Amazon ECR のコンテナイメージへのアクセスはどのように制御するか？
  - A: IAM ポリシーを使ってアクセスを制御する。
- Q: Amazon ECR のイメージスキャン機能は何をするか？
  - A: コンテナイメージの脆弱性を自動的にスキャンする。
- Q: Amazon ECR の料金はどのように計算されるか？
  - A: ストレージ容量、データ転送量、イメージスキャン機能に基づいて計算される。

---

## Elastic Container Service (ECS)

### 1. サービス概要

Amazon Elastic Container Service (ECS) は、コンテナ化されたアプリケーションを簡単にデプロイ、管理、スケーリングできるフルマネージドのコンテナオーケストレーションサービスである。  
開発者は、Docker コンテナを ECS で実行し、インフラストラクチャの管理を気にすることなく、アプリケーションの開発とデプロイに集中できる。  
ECS は、様々なユースケースに対応するための柔軟性と、AWS の他のサービスとの統合を提供する。

主なユースケースとして、

- Web アプリケーションのデプロイ
- マイクロサービスアーキテクチャの構築
- バッチ処理の実行
- 機械学習ワークロードの実行

などが挙げられる。  
Amazon ECS は、これらのユースケースに対応するための様々な機能と、AWS の他のサービスとの統合を提供する。

### 2. 主な特徴と機能

#### 2.1 フルマネージドサービス

ECS は、コンテナオーケストレーションをフルマネージドで提供する。  
ユーザーは、コンテナのデプロイ、管理、スケーリングに集中でき、インフラストラクチャの管理を行う必要はない。

#### 2.2 実行環境の選択

ECS は、Fargate と EC2 という 2 つの実行環境をサポートしている。  
Fargate は、サーバーレスでコンテナを実行できるため、インフラストラクチャの管理が不要である。  
EC2 は、EC2 インスタンス上でコンテナを実行するため、より柔軟な構成が可能である。

#### 2.3 Docker イメージのサポート

ECS は、Docker コンテナイメージをサポートしており、Docker CLI や Docker API を使って、コンテナイメージをプッシュ/プルできる。  
Amazon ECR などのコンテナレジストリと統合できる。

#### 2.4 ロードバランシング

アプリケーションロードバランサー（ALB）やネットワークロードバランサー（NLB）と統合することで、コンテナ化されたアプリケーションのトラフィックを分散し、可用性を高めることができる。

#### 2.5 自動スケーリング

アプリケーションの需要に応じて、コンテナの数を自動的にスケーリングできる。  
これにより、リソースの利用率を最適化し、コストを削減できる。

#### 2.6 サービスディスカバリー

AWS Cloud Map と統合することで、サービスディスカバリーを簡単に行うことができる。  
コンテナ化されたサービス間で、お互いを自動的に検出できるようになる。

#### 2.7 統合性と拡張性

Amazon ECS は、AWS の他のサービス（Amazon VPC, IAM, CloudWatch, CodeBuild, CodePipeline など）と密接に統合されており、コンテナベースのアプリケーション開発とデプロイメントを効率的に行える。  
また、API を利用して、コンテナの管理や自動化を行うこともできる。

### 3. アーキテクチャおよび技術要素

1. 開発者は、Docker イメージを Amazon ECR などのコンテナレジストリにプッシュ。
2. ECS タスク定義を作成し、実行するコンテナイメージ、リソース、ネットワーク設定などを定義。
3. ECS サービスを作成し、タスク定義に基づいてコンテナをデプロイ。
4. 必要に応じて、ロードバランサーを設定し、トラフィックを分散。
5. ECS は、タスクの実行状況を監視し、自動スケーリングを適用。

Amazon ECS は、AWS のインフラ上に構築されており、高い可用性とスケーラビリティを提供する。  
コンテナのデプロイや管理は AWS が行うため、ユーザーはインフラの管理を行う必要はない。

### 4. セキュリティと認証・認可

Amazon ECS は、コンテナアプリケーションのセキュリティを確保するために、以下の機能を提供する:

- **IAM 統合**: AWS Identity and Access Management (IAM) を利用して、ECS リソースへのアクセスを制御する。
- **VPC 内での実行**: ECS タスクは Virtual Private Cloud (VPC) 内で実行され、ネットワーク隔離を実現。
- **タスクロール**: ECS タスクに IAM ロールを割り当て、AWS リソースへのアクセスを制御。
- **データ暗号化**: コンテナイメージ、タスクデータなどは暗号化される。
- **セキュリティグループ**: ネットワークアクセスをセキュリティグループで制御。

これらのセキュリティ対策により、コンテナアプリケーションとそのデータを安全に保護する。

### 5. 料金形態

Amazon ECS の料金は主に以下に基づきる:

- **Fargate**: 仮想 CPU、メモリ、ストレージなどの使用量に応じて課金。
- **EC2**: EC2 インスタンスの利用料金、ストレージ、データ転送量に応じて課金。
- **ロードバランサー**: ロードバランサーの利用料金、データ処理量に応じて課金。
- **データ転送**: データ転送量に応じて課金。

### 6. よくあるアーキテクチャ・設計パターン

Amazon ECS は、様々なアプリケーションのデプロイメントに利用できる。  
一般的なパターンは以下の通りである:

- **Web アプリケーションのデプロイ**: Web アプリケーションをコンテナ化し、ECS でデプロイし、ロードバランサーでトラフィックを分散。
- **マイクロサービスアーキテクチャ**: マイクロサービスごとにコンテナをデプロイし、ECS で管理。
- **バッチ処理の実行**: バッチ処理ジョブをコンテナ化し、ECS で実行。
- **機械学習ワークロードの実行**: 機械学習モデルをコンテナ化し、ECS で実行。
- **API バックエンド**: API バックエンドをコンテナ化し、ECS でデプロイし、API Gateway と連携。
- **CI/CD パイプライン**: AWS CodeBuild, CodePipeline と連携し、コンテナイメージのビルドからデプロイまでを自動化。

### 7. 設定・デプロイ手順（ハンズオン例）

1. AWS マネジメントコンソールから Amazon ECS を開き、クラスターを作成。
2. ECS タスク定義を作成し、実行するコンテナイメージ、リソース、ネットワーク設定などを定義。
3. ECS サービスを作成し、タスク定義に基づいてコンテナをデプロイ。
4. 必要に応じて、ロードバランサーを設定し、トラフィックを分散。
5. アプリケーションにアクセスし、動作を確認。

### 8. 試験で問われやすいポイント

#### 8.1 フルマネージドサービス

- **利点**: コンテナオーケストレーションを AWS が管理、ユーザーはアプリケーション開発に集中。
- **対象**: コンテナのデプロイ、管理、スケーリング。
- **試験対策**: フルマネージドのメリット、管理範囲が問われる。

#### 8.2 実行環境の選択

- **Fargate**: サーバーレスでコンテナを実行、インフラ管理が不要。
- **EC2**: EC2 インスタンス上でコンテナを実行、より柔軟な構成が可能。
- **試験対策**: Fargate と EC2 の違い、利用ケースが問われる。

#### 8.3 Docker イメージのサポート

- **連携**: Docker CLI、Docker API、Amazon ECR。
- **利用**: コンテナイメージをプッシュ、プル。
- **試験対策**: Docker イメージの利用方法、ECR との連携が問われる。

#### 8.4 ロードバランシング

- **連携サービス**: ALB, NLB。
- **目的**: アプリケーションのトラフィックを分散、可用性を高める。
- **試験対策**: ロードバランサーの設定方法、利用目的が問われる。

#### 8.5 自動スケーリング

- **機能**: アプリケーションの需要に応じて、コンテナ数を自動的にスケーリング。
- **目的**: リソースの利用率を最適化、コストを削減。
- **試験対策**: 自動スケーリングの仕組み、設定方法が問われる。

#### 8.6 サービスディスカバリー

- **連携サービス**: AWS Cloud Map。
- **機能**: コンテナ化されたサービス間での相互検出。
- **試験対策**: サービスディスカバリーの仕組み、Cloud Map との連携が問われる。

#### 8.7 料金体系

- **課金対象**: Fargate 使用量、EC2 インスタンス利用料、ロードバランサー利用料、データ転送量。
- **最適化**: リソース使用率の最適化、適切な実行環境の選択がコスト最適化に有効。

#### 8.8 類似・関連サービスとの比較

- **Amazon EKS**: Kubernetes をベースとしたコンテナオーケストレーションサービス。ECS はよりシンプルなコンテナ管理を提供。
- **AWS Fargate**: サーバーレスコンピューティングサービス。ECS で Fargate を利用可能。

#### 8.9 試験で頻出となる具体的な問われ方と答え

- Q: Amazon ECS は何をするサービスか？
  - A: コンテナ化されたアプリケーションを簡単にデプロイ、管理、スケーリングできるフルマネージドのコンテナオーケストレーションサービスである。
- Q: Amazon ECS の実行環境として何が利用できるか？
  - A: Fargate と EC2 の 2 つの実行環境を利用できる。
- Q: Amazon ECS は、どのようなコンテナイメージをサポートしているか？
  - A: Docker コンテナイメージをサポートしている。
- Q: Amazon ECS でロードバランシングを行うには、どのようなサービスと統合するか？
  - A: アプリケーションロードバランサー（ALB）やネットワークロードバランサー（NLB）と統合する。
- Q: Amazon ECS の料金はどのように計算されるか？
  - A: Fargate 使用量、EC2 インスタンス利用料、ロードバランサー利用料、データ転送量などに基づいて計算される。

---

## Elastic Kubernetes Service (EKS)

### 1. サービス概要

Amazon Elastic Kubernetes Service (EKS) は、Kubernetes をベースとしたコンテナオーケストレーションをフルマネージドで提供するサービスである。  
開発者は、Kubernetes 環境を AWS 上で簡単に構築、管理、スケーリングでき、コンテナ化されたアプリケーションのデプロイメントと管理を効率的に行うことができる。  
EKS は、Kubernetes の柔軟性と AWS の可用性、セキュリティ、スケーラビリティを組み合わせて、複雑なコンテナワークロードをサポートする。

主なユースケースとして、

- マイクロサービスアーキテクチャの構築
- Web アプリケーションのデプロイ
- バッチ処理の実行
- 機械学習ワークロードの実行
- ハイブリッドクラウド環境でのコンテナオーケストレーション

などが挙げられる。  
Amazon EKS は、これらのユースケースに対応するための様々な機能と、AWS の他のサービスとの統合を提供する。

### 2. 主な特徴と機能

#### 2.1 Kubernetes ベースのコンテナオーケストレーション

EKS は、オープンソースのコンテナオーケストレーションプラットフォームである Kubernetes をベースにしている。  
Kubernetes の API やエコシステムを利用して、コンテナ化されたアプリケーションを管理できる。

#### 2.2 フルマネージドコントロールプレーン

EKS は、Kubernetes のコントロールプレーン（API サーバー、スケジューラーなど）をフルマネージドで提供する。  
ユーザーは、コントロールプレーンの管理を AWS に任せ、ワーカーノードの管理とアプリケーションのデプロイに集中できる。

#### 2.3 柔軟なワーカーノード構成

EKS は、EC2 インスタンスまたは AWS Fargate をワーカーノードとして利用できる。  
EC2 インスタンスでは、ノードのタイプ、サイズ、ネットワーク設定などを自由にカスタマイズできる。  
Fargate では、サーバーレスでワーカーノードを実行できる。

#### 2.4 ロードバランシング

アプリケーションロードバランサー（ALB）やネットワークロードバランサー（NLB）と統合することで、コンテナ化されたアプリケーションのトラフィックを分散し、可用性を高めることができる。

#### 2.5 自動スケーリング

Kubernetes Horizontal Pod Autoscaler（HPA）や Cluster Autoscaler を利用して、アプリケーションの需要に応じて、Pod やワーカーノードの数を自動的にスケーリングできる。  
これにより、リソースの利用率を最適化し、コストを削減できる。

#### 2.6 サービスディスカバリー

Kubernetes のサービスディスカバリー機能を利用して、コンテナ化されたサービス間でお互いを検出できる。  
また、AWS Cloud Map と統合して、より高度なサービスディスカバリーを実現することも可能である。

#### 2.7 統合性と拡張性

Amazon EKS は、AWS の他のサービス（IAM, VPC, CloudWatch, CodeBuild, CodePipeline など）と密接に統合されており、コンテナベースのアプリケーション開発とデプロイメントを効率的に行える。  
また、Kubernetes のエコシステム（Helm, kubectl など）を利用して、アプリケーションのデプロイメントを自動化することもできる。

### 3. アーキテクチャおよび技術要素

1. 開発者は、Docker イメージを Amazon ECR などのコンテナレジストリにプッシュ。
2. EKS クラスターを作成し、Kubernetes コントロールプレーンとワーカーノードを構成。
3. Kubernetes マニフェストファイルを作成し、アプリケーションのデプロイ、サービス、ロードバランサーなどを定義。
4. kubectl などのツールを使って、マニフェストファイルを適用し、アプリケーションをデプロイ。
5. 必要に応じて、自動スケーリングを設定し、リソースを動的に調整。

Amazon EKS は、AWS のインフラ上に構築されており、高い可用性とスケーラビリティを提供する。  
Kubernetes コントロールプレーンの管理は AWS が行うため、ユーザーはワーカーノードの管理とアプリケーションのデプロイに集中できる。

### 4. セキュリティと認証・認可

Amazon EKS は、コンテナアプリケーションのセキュリティを確保するために、以下の機能を提供する:

- **IAM 統合**: AWS Identity and Access Management (IAM) を利用して、EKS リソースへのアクセスを制御する。
- **VPC 内での実行**: EKS クラスターは Virtual Private Cloud (VPC) 内で実行され、ネットワーク隔離を実現。
- **RBAC**: Kubernetes の Role-Based Access Control (RBAC) を利用して、クラスター内のアクセス制御を実施。
- **シークレット管理**: AWS Secrets Manager と連携して、機密情報を安全に管理。
- **データ暗号化**: コンテナイメージ、タスクデータなどは暗号化される。
- **セキュリティグループ**: ネットワークアクセスをセキュリティグループで制御。

これらのセキュリティ対策により、コンテナアプリケーションとそのデータを安全に保護する。

### 5. 料金形態

Amazon EKS の料金は主に以下に基づきる:

- **EKS コントロールプレーン**: EKS クラスターのコントロールプレーンの利用料金。
- **ワーカーノード**: EC2 インスタンスの利用料金、または AWS Fargate の使用量に応じて課金。
- **ロードバランサー**: ロードバランサーの利用料金、データ処理量に応じて課金。
- **データ転送**: データ転送量に応じて課金。

### 6. よくあるアーキテクチャ・設計パターン

Amazon EKS は、様々なコンテナベースのアプリケーション開発に利用できる。一般的なパターンは以下の通りである:

- **マイクロサービスアーキテクチャ**: マイクロサービスごとにコンテナをデプロイし、EKS でオーケストレーション。
- **Web アプリケーションのデプロイ**: Web アプリケーションをコンテナ化し、EKS でデプロイし、ロードバランサーでトラフィックを分散。
- **バッチ処理の実行**: バッチ処理ジョブをコンテナ化し、EKS で実行。
- **機械学習ワークロードの実行**: 機械学習モデルをコンテナ化し、EKS で実行。
- **API バックエンド**: API バックエンドをコンテナ化し、EKS でデプロイし、API Gateway と連携。
- **ハイブリッドクラウド環境**: オンプレミス環境と AWS 環境で Kubernetes クラスターを連携し、コンテナオーケストレーションを統合。

### 7. 設定・デプロイ手順（ハンズオン例）

1. AWS マネジメントコンソールまたは eksctl ツールを使って、EKS クラスターを作成。
2. ワーカーノードとして EC2 インスタンスまたは Fargate を設定。
3. Kubernetes マニフェストファイルを作成し、デプロイするコンテナイメージ、リソースなどを定義。
4. kubectl などのツールを使って、マニフェストファイルを適用し、アプリケーションをデプロイ。
5. 必要に応じて、ロードバランサーを設定し、トラフィックを分散。
6. アプリケーションにアクセスし、動作を確認。

### 8. 試験で問われやすいポイント

#### 8.1 Kubernetes ベースのコンテナオーケストレーション

- **利用**: Kubernetes の API、エコシステムを利用。
- **目的**: コンテナ化されたアプリケーションの管理。
- **試験対策**: Kubernetes の基本概念、EKS での利用が問われる。

#### 8.2 フルマネージドコントロールプレーン

- **機能**: Kubernetes のコントロールプレーンを AWS が管理。
- **対象外**: ユーザーはコントロールプレーンの管理が不要。
- **試験対策**: フルマネージドのメリット、管理範囲が問われる。

#### 8.3 柔軟なワーカーノード構成

- **選択肢**: EC2 インスタンス、AWS Fargate。
- **特徴**: EC2 は柔軟な構成、Fargate はサーバーレス。
- **試験対策**: EC2 と Fargate の違い、利用ケースが問われる。

#### 8.4 ロードバランシング

- **連携サービス**: ALB, NLB。
- **目的**: アプリケーションのトラフィックを分散、可用性を高める。
- **試験対策**: ロードバランサーの設定方法、利用目的が問われる。

#### 8.5 自動スケーリング

- **機能**: Kubernetes HPA、Cluster Autoscaler を利用して、Pod やノードを自動スケーリング。
- **目的**: リソースの利用率を最適化、コストを削減。
- **試験対策**: 自動スケーリングの仕組み、設定方法が問われる。

#### 8.6 サービスディスカバリー

- **機能**: Kubernetes のサービスディスカバリー、AWS Cloud Map との統合。
- **目的**: コンテナ化されたサービス間でお互いを検出。
- **試験対策**: サービスディスカバリーの仕組み、Cloud Map との連携が問われる。

#### 8.7 料金体系

- **課金対象**: EKS コントロールプレーン利用料、ワーカーノード（EC2, Fargate）、ロードバランサー、データ転送量。
- **最適化**: リソース使用率の最適化、適切なワーカーノードタイプの選択がコスト最適化に有効。

#### 8.8 類似・関連サービスとの比較

- **Amazon ECS**: コンテナオーケストレーションサービス。EKS は Kubernetes をベースとしたより高度な機能を提供。
- **AWS Fargate**: サーバーレスコンピューティングサービス。EKS で Fargate を利用可能。

#### 8.9 試験で頻出となる具体的な問われ方と答え

- Q: Amazon EKS は何をベースにしたサービスか？
  - A: オープンソースのコンテナオーケストレーションプラットフォームである Kubernetes をベースにしている。
- Q: Amazon EKS でコントロールプレーンはどのように管理されるか？
  - A: フルマネージドで AWS が管理する。
- Q: Amazon EKS でワーカーノードとして何が利用できるか？
  - A: EC2 インスタンスまたは AWS Fargate を利用できる。
- Q: Amazon EKS でロードバランシングを行うには、どのようなサービスと統合するか？
  - A: アプリケーションロードバランサー（ALB）やネットワークロードバランサー（NLB）と統合する。
- Q: Amazon EKS の料金はどのように計算されるか？
  - A: EKS コントロールプレーン利用料、ワーカーノード（EC2, Fargate）、ロードバランサー、データ転送量などに基づいて計算される。

---

## Fargate

### 1. サービス概要

AWS Fargate は、コンテナを実行するためのサーバーレスコンピューティングエンジンである。  
ユーザーは、コンテナを実行するための EC2 インスタンスなどのインフラストラクチャを管理することなく、Docker コンテナをデプロイ、実行、スケーリングできる。  
Fargate は、コンテナの実行に必要なコンピューティングリソースを自動的にプロビジョニングし、ユーザーはアプリケーション開発とデプロイに集中できる。  
これにより、インフラストラクチャの管理コストを削減し、開発者の生産性を向上させることができる。

主なユースケースとして、

- Web アプリケーションのデプロイ
- マイクロサービスアーキテクチャの構築
- API バックエンドの実行
- バッチ処理の実行
- 機械学習ワークロードの実行

などが挙げられる。  
AWS Fargate は、これらのユースケースに対応するための様々な機能と、AWS の他のサービスとの統合を提供する。

### 2. 主な特徴と機能

#### 2.1 サーバーレスコンテナ実行

Fargate は、サーバーレスでコンテナを実行できるため、EC2 インスタンスなどのインフラストラクチャの管理が不要である。  
ユーザーは、コンテナイメージを指定するだけで、コンテナを実行できる。

#### 2.2 コンテナの自動スケーリング

アプリケーションの需要に応じて、コンテナの数を自動的にスケーリングできる。  
これにより、リソースの利用率を最適化し、コストを削減できる。

#### 2.3 柔軟なリソース設定

コンテナに必要な CPU、メモリ、ストレージなどのリソースを柔軟に設定できる。  
これにより、アプリケーションの要件に合わせたリソース構成を実現できる。

#### 2.4 Docker イメージのサポート

Fargate は、Docker コンテナイメージをサポートしており、Docker CLI や Docker API を使って、コンテナイメージをプッシュ/プルできる。  
Amazon ECR などのコンテナレジストリと統合できる。

#### 2.5 ロードバランシング

アプリケーションロードバランサー（ALB）やネットワークロードバランサー（NLB）と統合することで、コンテナ化されたアプリケーションのトラフィックを分散し、可用性を高めることができる。

#### 2.6 統合性と拡張性

AWS Fargate は、Amazon ECS、Amazon EKS、AWS App Runner などのコンテナオーケストレーションサービスと統合できる。  
また、AWS の他のサービス（IAM, VPC, CloudWatch など）とも密接に統合されており、コンテナベースのアプリケーション開発とデプロイメントを効率的に行える。

#### 2.7 セキュリティ

Fargate は、コンテナアプリケーションをセキュアに実行するための様々な機能を提供する。  
コンテナイメージの脆弱性スキャン、ネットワーク隔離、IAM によるアクセス制御など、セキュリティ対策が組み込まれている。

### 3. アーキテクチャおよび技術要素

1. 開発者は、Docker イメージを Amazon ECR などのコンテナレジストリにプッシュ。
2. ECS タスク定義または EKS Pod 定義を作成し、実行するコンテナイメージ、リソース、ネットワーク設定などを定義。
3. Fargate を使用して、コンテナをデプロイ。
4. 必要に応じて、ロードバランサーを設定し、トラフィックを分散。
5. Fargate は、コンテナの実行に必要なコンピューティングリソースを自動的にプロビジョニング。

AWS Fargate は、AWS のインフラ上に構築されており、高い可用性とスケーラビリティを提供する。  
コンテナの実行に必要なインフラストラクチャは AWS が管理するため、ユーザーはサーバー管理を意識する必要はない。

#### 4. セキュリティと認証・認可

AWS Fargate は、コンテナアプリケーションのセキュリティを確保するために、以下の機能を提供する:

- **IAM 統合**: AWS Identity and Access Management (IAM) を利用して、Fargate タスクへのアクセスを制御する。
- **VPC 内での実行**: Fargate タスクは Virtual Private Cloud (VPC) 内で実行され、ネットワーク隔離を実現。
- **タスクロール**: Fargate タスクに IAM ロールを割り当て、AWS リソースへのアクセスを制御。
- **データ暗号化**: コンテナイメージ、タスクデータなどは暗号化される。
- **コンテナイメージの脆弱性スキャン**: ECR イメージスキャン機能を利用し、脆弱性を検出。

これらのセキュリティ対策により、コンテナアプリケーションとそのデータを安全に保護する。

### 5. 料金形態

AWS Fargate の料金は主に以下に基づきる:

- **仮想 CPU**: タスクで使用される仮想 CPU の量に応じて課金。
- **メモリ**: タスクで使用されるメモリの量に応じて課金。
- **ストレージ**: タスクで使用されるストレージの量に応じて課金。
- **データ転送**: データ転送量に応じて課金。

### 6. よくあるアーキテクチャ・設計パターン

AWS Fargate は、様々なコンテナアプリケーションのデプロイメントに利用できる。  
一般的なパターンは以下の通りである:

- **Web アプリケーションのデプロイ**: Web アプリケーションをコンテナ化し、Fargate でデプロイし、ロードバランサーでトラフィックを分散。
- **マイクロサービスアーキテクチャ**: マイクロサービスごとにコンテナをデプロイし、Fargate で実行。
- **API バックエンド**: API バックエンドをコンテナ化し、Fargate でデプロイし、API Gateway と連携。
- **バッチ処理の実行**: バッチ処理ジョブをコンテナ化し、Fargate で実行。
- **機械学習ワークロードの実行**: 機械学習モデルをコンテナ化し、Fargate で実行。

### 7. 設定・デプロイ手順（ハンズオン例）

1. AWS マネジメントコンソールから Amazon ECS または Amazon EKS を開き、クラスターを作成。
2. ECS タスク定義または EKS Pod 定義を作成し、Fargate 起動タイプを選択。
3. 実行するコンテナイメージ、リソース、ネットワーク設定などを定義。
4. Fargate を使用して、コンテナをデプロイ。
5. 必要に応じて、ロードバランサーを設定し、トラフィックを分散。
6. アプリケーションにアクセスし、動作を確認。

### 8. 試験で問われやすいポイント

#### 8.1 サーバーレスコンテナ実行

- **特徴**: EC2 インスタンスなどのインフラストラクチャの管理が不要。
- **メリット**: コンテナイメージを指定するだけで、コンテナを実行可能。
- **試験対策**: サーバーレスのメリット、管理範囲が問われる。

#### 8.2 コンテナの自動スケーリング

- **機能**: アプリケーションの需要に応じて、コンテナ数を自動的にスケーリング。
- **目的**: リソースの利用率を最適化、コストを削減。
- **試験対策**: 自動スケーリングの仕組み、メリットが問われる。

#### 8.3 柔軟なリソース設定

- **設定項目**: CPU, メモリ, ストレージなどのリソースを柔軟に設定。
- **利点**: アプリケーションの要件に合わせたリソース構成。
- **試験対策**: リソース設定の方法、柔軟性が問われる。

#### 8.4 Docker イメージのサポート

- **連携**: Docker CLI、Docker API、Amazon ECR。
- **利用**: コンテナイメージをプッシュ、プル。
- **試験対策**: Docker イメージの利用方法、ECR との連携が問われる。

#### 8.5 ロードバランシング

- **連携サービス**: ALB, NLB。
- **目的**: アプリケーションのトラフィックを分散、可用性を高める。
- **試験対策**: ロードバランサーの設定方法、利用目的が問われる。

#### 8.6 料金体系

- **課金対象**: 仮想 CPU, メモリ, ストレージの使用量、データ転送量。
- **最適化**: リソース使用量の最適化がコスト削減に有効。
- **試験対策**: 料金体系、課金対象が問われる。

#### 8.7 類似・関連サービスとの比較

- **Amazon ECS**: コンテナオーケストレーションサービス。Fargate は ECS で利用可能な実行環境。
- **Amazon EKS**: Kubernetes をベースとしたコンテナオーケストレーションサービス。Fargate は EKS で利用可能な実行環境。
- **AWS Lambda**: イベント駆動型のサーバーレスコンピューティングサービス。Fargate はコンテナベースのワークロードに特化。

#### 8.8 試験で頻出となる具体的な問われ方と答え

- Q: AWS Fargate は何を提供するサービスか？
  - A: コンテナを実行するためのサーバーレスコンピューティングエンジンである。
- Q: AWS Fargate でユーザーが管理する必要のあるインフラストラクチャは何か？
  - A: ユーザーは、インフラストラクチャの管理を行う必要はない。
- Q: AWS Fargate は、どのようなコンテナイメージをサポートしているか？
  - A: Docker コンテナイメージをサポートしている。
- Q: AWS Fargate でロードバランシングを行うには、どのようなサービスと統合するか？
  - A: アプリケーションロードバランサー（ALB）やネットワークロードバランサー（NLB）と統合する。
- Q: AWS Fargate の料金はどのように計算されるか？
  - A: 仮想 CPU、メモリ、ストレージの使用量、データ転送量に基づいて計算される。
