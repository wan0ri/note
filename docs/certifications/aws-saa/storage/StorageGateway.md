---
title: Storage Gateway
---

## 1. サービス概要

AWS Storage Gateway は、オンプレミス環境と AWS クラウドの間でストレージを連携させるハイブリッドストレージサービスである。  
ユーザーは、オンプレミス環境から AWS のストレージサービス（S3、EBS、Glacier）にアクセスし、データを移行したり、クラウドストレージをローカルストレージとして利用したりできる。  
Storage Gateway は、多様なユースケースに対応するための柔軟性と、オンプレミス環境と AWS クラウド間のデータ連携を簡素化する。

主なユースケースとして、

- オンプレミスデータの AWS クラウドへの移行
- オンプレミスアプリケーションでのクラウドストレージの利用
- バックアップと災害対策
- データアーカイブ
- ファイル共有

などが挙げられる。  
AWS Storage Gateway は、これらのユースケースに対応するための様々な機能と、AWS の他のサービスとの統合を提供する。

## 2. 主な特徴と機能

## 2.1 ハイブリッドストレージ

Storage Gateway は、オンプレミス環境と AWS クラウドの間でストレージを連携させるハイブリッドストレージソリューションを提供する。  
これにより、クラウドストレージをオンプレミス環境からシームレスに利用できる。

## 2.2 ゲートウェイタイプ

Storage Gateway には、ファイルゲートウェイ、ボリュームゲートウェイ、テープゲートウェイという 3 つのゲートウェイタイプがある。  
各ゲートウェイタイプは、異なるユースケースに対応している。

## 2.3 ファイルゲートウェイ

NFS または SMB プロトコルを使用して、オンプレミスアプリケーションから Amazon S3 にアクセスできるようにする。  
これにより、ファイル共有やコンテンツ配信などのユースケースに対応できる。

## 2.4 ボリュームゲートウェイ

iSCSI プロトコルを使用して、オンプレミス環境から AWS にブロックストレージを提供する。  
これにより、オンプレミスアプリケーションでクラウドストレージをローカルストレージとして利用できる。

## 2.5 テープゲートウェイ

物理的なテープライブラリを仮想テープライブラリ（VTL）に置き換え、バックアップデータを S3 Glacier にアーカイブできる。  
これにより、テープストレージのコスト削減と管理の簡素化を実現できる。

## 2.6 ローカルキャッシュ

よくアクセスされるデータをローカルにキャッシュし、データアクセスを高速化できる。  
これにより、クラウドストレージへのアクセスレイテンシーを低減し、パフォーマンスを向上させることができる。

## 2.7 統合性と拡張性

AWS Storage Gateway は、Amazon S3, Amazon EBS, Amazon Glacier, AWS Backup, AWS Direct Connect などの AWS の他のサービスと密接に統合されており、様々なワークフローに対応できる。  
また、API を利用して、Storage Gateway の管理を自動化することもできる。

## 3. アーキテクチャおよび技術要素

1. ユーザーは、オンプレミス環境に Storage Gateway のアプライアンス（仮想またはハードウェア）を展開。
2. Storage Gateway は、オンプレミスアプリケーションからのストレージリクエストを受け付け、AWS クラウドへ転送。
3. AWS クラウドでは、S3、EBS、Glacier などのストレージサービスにデータが保存。
4. データは、転送中および保存時に暗号化。
5. よくアクセスされるデータは、ローカルキャッシュに保存し、高速アクセスを実現。

AWS Storage Gateway は、オンプレミス環境と AWS クラウドをシームレスに連携させ、ハイブリッドストレージソリューションを提供する。  
データの転送やストレージの管理は AWS が行うため、ユーザーはインフラの管理を行う必要はない。

## 4. セキュリティと認証・認可

AWS Storage Gateway は、データセキュリティを確保するために、以下の機能を提供する:

- **IAM 統合**: AWS Identity and Access Management (IAM) を利用して、Storage Gateway へのアクセスを制御する。
- **データ暗号化**: データは転送中および保存時に暗号化される。
- **VPC エンドポイント**: VPC 内から Storage Gateway にアクセスする際に、インターネットを経由せずにアクセスできる。
- **アクセス制御**: IAM ポリシーを通じて、ユーザーやグループごとに、Storage Gateway の操作権限を詳細に制御できる。

これらのセキュリティ対策により、オンプレミス環境と AWS クラウド間のデータ転送を安全に保護する。

## 5. 料金形態

AWS Storage Gateway の料金は主に以下に基づく:

- **ゲートウェイの利用**: Storage Gateway アプライアンスの実行時間に応じて課金。
- **ストレージ**: クラウドストレージ（S3, EBS, Glacier）の利用料金が発生。
- **データ転送**: データ転送量に応じて課金。
- **キャッシュ**: ローカルキャッシュで使用するストレージ容量に応じて課金。

## 6. よくあるアーキテクチャ・設計パターン

AWS Storage Gateway は、様々なハイブリッドストレージ環境で利用できる。  
一般的なパターンは以下の通りである:

- **オンプレミスデータの AWS クラウドへの移行**: 大量のデータを AWS に移行するために、Storage Gateway を利用。
- **オンプレミスアプリケーションでのクラウドストレージの利用**: オンプレミスアプリケーションからクラウドストレージをローカルストレージのように利用。
- **バックアップと災害対策**: オンプレミスのバックアップデータを AWS に保存し、災害復旧に備える。
- **データアーカイブ**: 古いデータを S3 Glacier にアーカイブし、長期保管。
- **ファイル共有**: オンプレミス環境と AWS クラウド環境の間で、ファイルを共有。
- **ハイブリッドクラウド環境**: オンプレミス環境と AWS クラウド環境を連携させ、柔軟なストレージ環境を構築。

## 7. 設定・デプロイ手順（ハンズオン例）

1. AWS マネジメントコンソールから AWS Storage Gateway を開き、ゲートウェイタイプ（ファイル、ボリューム、テープ）を選択。
2. Storage Gateway のアプライアンス（仮想またはハードウェア）をダウンロードし、オンプレミス環境にデプロイ。
3. アプライアンスを設定し、AWS アカウントと連携。
4. ゲートウェイを作成し、AWS のストレージサービス（S3, EBS, Glacier）と連携。
5. オンプレミス環境から Storage Gateway 経由で、クラウドストレージにアクセス。

## 8. 試験で問われやすいポイント

## 8.1 ハイブリッドストレージ

- **特徴**: オンプレミス環境と AWS クラウド間でストレージを連携。
- **利用**: クラウドストレージをオンプレミスからシームレスに利用可能。
- **試験対策**: ハイブリッドストレージのメリット、利用ケースが問われる。

## 8.2 ゲートウェイタイプ

- **種類**: ファイルゲートウェイ、ボリュームゲートウェイ、テープゲートウェイ。
- **利用**: 各ゲートウェイタイプは異なるユースケースに対応。
- **試験対策**: 各ゲートウェイタイプの特徴、利用シーンが問われる。

## 8.3 ファイルゲートウェイ

- **プロトコル**: NFS または SMB。
- **利用**: オンプレミスアプリケーションから S3 へのアクセス。
- **試験対策**: ファイルゲートウェイの利用方法、プロトコルが問われる。

## 8.4 ボリュームゲートウェイ

- **プロトコル**: iSCSI。
- **利用**: オンプレミス環境から AWS にブロックストレージを提供。
- **試験対策**: ボリュームゲートウェイの利用方法、プロトコルが問われる。

## 8.5 テープゲートウェイ

- **機能**: 物理的なテープライブラリを VTL に置き換え。
- **利用**: バックアップデータを S3 Glacier にアーカイブ。
- **試験対策**: テープゲートウェイの利用方法、VTL との連携が問われる。

## 8.6 ローカルキャッシュ

- **機能**: よくアクセスされるデータをローカルにキャッシュ。
- **目的**: データアクセスを高速化、レイテンシーを低減。
- **試験対策**: ローカルキャッシュの仕組み、メリットが問われる。

## 8.7 料金体系

- **課金対象**: ゲートウェイの利用、クラウドストレージの利用、データ転送量、キャッシュストレージ。
- **最適化**: 不要なデータ転送の削減、適切なキャッシュサイズの設定がコスト削減に有効。
- **試験対策**: 料金体系、課金対象が問われる。

## 8.8 類似・関連サービスとの比較

- **AWS DataSync**: オンプレミスと AWS 間で大量データを高速に移行するサービス。Storage Gateway はオンプレミスとクラウド間のストレージ連携に特化。
- **Amazon S3**: オブジェクトストレージサービス。Storage Gateway はオンプレミスからのアクセスを容易にするためのサービス。

## 8.9 試験で頻出となる具体的な問われ方と答え

- Q: AWS Storage Gateway は何を提供するサービスですか？
  - A: オンプレミス環境と AWS クラウドの間でストレージを連携させるハイブリッドストレージサービスである。
- Q: AWS Storage Gateway には、どのようなゲートウェイタイプがありますか？
  - A: ファイルゲートウェイ、ボリュームゲートウェイ、テープゲートウェイの 3 つのゲートウェイタイプがある。
- Q: AWS Storage Gateway のファイルゲートウェイは、どのようなプロトコルをサポートしていますか？
  - A: NFS または SMB プロトコルをサポートしている。
- Q: AWS Storage Gateway のテープゲートウェイは、どのような役割を果たしますか？
  - A: 物理的なテープライブラリを仮想テープライブラリ（VTL）に置き換え、バックアップデータを S3 Glacier にアーカイブできる。
- Q: AWS Storage Gateway の料金はどのように計算されますか？
  - A: ゲートウェイの利用、クラウドストレージの利用、データ転送量、キャッシュストレージなどに基づいて計算される。
