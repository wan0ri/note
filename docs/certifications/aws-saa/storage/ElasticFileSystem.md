---
title: Elastic File System (EFS)
---

## 1. サービス概要

Amazon Elastic File System (EFS) は、複数の Amazon EC2 インスタンスから同時にアクセスできる、シンプルでスケーラブルなフルマネージドのネットワークファイルシステムである。  
ユーザーは、サーバーレスアプリケーション、コンテナ、ビッグデータ分析、Web サーバーなど、様々なワークロードで利用できる共有ファイルシステムを作成し、データを共有できる。  
EFS は、ファイルストレージの管理を簡素化し、複数の EC2 インスタンス間でデータの整合性を維持する。

主なユースケースとして、

- Web アプリケーションのコンテンツ共有
- ビッグデータ分析
- コンテナワークロードの永続ストレージ
- メディア処理
- 機械学習のワークロード
- コンテンツ管理システム

などが挙げられる。  
Amazon EFS は、これらのユースケースに対応するための様々な機能と、AWS の他のサービスとの統合を提供する。

## 2. 主な特徴と機能

## 2.1 ネットワークファイルシステム

EFS は、複数の EC2 インスタンスから同時にアクセスできるネットワークファイルシステムを提供する。  
これにより、複数のサーバー間でデータを共有し、アプリケーションの可用性と拡張性を高めることができる。

## 2.2 フルマネージドサービス

EFS は、ファイルシステムのプロビジョニング、バックアップ、スケーリングなどの管理を AWS に任せることができる。  
ユーザーは、ファイルシステムの管理に煩わされることなく、アプリケーション開発に集中できる。

## 2.3 スケーラビリティ

EFS は、需要に応じてストレージ容量とパフォーマンスを自動的にスケーリングする。  
これにより、アプリケーションのデータ量やトラフィックの変動に対応できる。

## 2.4 パフォーマンスモード

EFS には、汎用と最大 I/O という 2 つのパフォーマンスモードがある。  
汎用モードは、幅広いワークロードに適しており、最大 I/O モードは、高いスループットと IOPS を必要とするワークロードに適している。

## 2.5 ストレージクラス

EFS は、標準と低頻度アクセスという 2 つのストレージクラスを提供している。  
標準クラスは、頻繁にアクセスされるデータに適しており、低頻度アクセス（IA）クラスは、あまりアクセスされないデータに適している。

## 2.6 暗号化

EFS ファイルシステムを暗号化して、保存データを保護できる。  
EFS の暗号化は、作成時または既存のファイルシステムの設定変更時に設定できる。

## 2.7 統合性と拡張性

Amazon EFS は、Amazon EC2, AWS Lambda, AWS Fargate, AWS Backup, AWS DataSync などの AWS の他のサービスと密接に統合されている。  
また、API を利用して、EFS ファイルシステムの管理を自動化することもできる。

## 3. アーキテクチャおよび技術要素

1. ユーザーは、Amazon EFS ファイルシステムを作成し、EC2 インスタンスからマウント。
2. 複数の EC2 インスタンスが同時に、同一の EFS ファイルシステムにアクセスし、データの共有。
3. 必要に応じて、EFS ファイルシステムのスナップショットを作成。
4. 必要に応じて、異なる可用性ゾーンにある EC2 インスタンスから EFS ファイルシステムにアクセス。
5. データは、EFS ファイルシステムに保存され、スケーラビリティと耐久性が確保。

Amazon EFS は、AWS のインフラ上に構築されており、高い可用性と耐久性を提供する。  
ファイルシステムのプロビジョニングや管理は AWS が行うため、ユーザーはインフラの管理を意識する必要はない。

## 4. セキュリティと認証・認可

Amazon EFS は、ファイルシステムのセキュリティを確保するために、以下の機能を提供する:

- **IAM 統合**: AWS Identity and Access Management (IAM) を利用して、EFS へのアクセスを制御する。
- **VPC 内での実行**: EFS は Virtual Private Cloud (VPC) 内で実行され、ネットワーク隔離を実現。
- **データ暗号化**: データは転送中および保存時に暗号化される。
- **NFS アクセス制御**: Network File System (NFS) のアクセス制御リスト (ACL) を利用して、ファイルシステムへのアクセスを制御。
- **セキュリティグループ**: ネットワークアクセスをセキュリティグループで制御。

これらのセキュリティ対策により、ファイルシステムとそのデータを安全に保護する。

## 5. 料金形態

Amazon EFS の料金は主に以下に基づく:

- **ストレージ使用量**: ファイルシステムで使用されたストレージ容量に応じて課金。
- **データ転送**: データ転送量に応じて課金。
- **ストレージクラス**: 標準クラスと低頻度アクセス（IA）クラスで料金が異なる。
- **スループット**: プロビジョニングされたスループット容量に応じて課金。

## 6. よくあるアーキテクチャ・設計パターン

Amazon EFS は、様々なワークロードに利用できる。一般的なパターンは以下の通りである:

- **Web アプリケーションのコンテンツ共有**: Web アプリケーションの静的コンテンツやアップロードファイルを、複数の EC2 インスタンスで共有。
- **ビッグデータ分析**: ビッグデータ分析のために、複数の EC2 インスタンスで共通のデータセットを共有。
- **コンテナワークロードの永続ストレージ**: コンテナ化されたアプリケーションの永続的なストレージとして、EFS を利用。
- **メディア処理**: 動画や画像などのメディアファイルを、複数のインスタンスで共有し、編集、変換などの処理を実行。
- **機械学習のワークロード**: 機械学習モデルや学習データを共有し、複数のインスタンスで学習や推論を実行。
- **コンテンツ管理システム**: コンテンツ管理システムのコンテンツを EFS に保存し、複数のサーバーで共有。

## 7. 設定・デプロイ手順（ハンズオン例）

1. AWS マネジメントコンソールから Amazon EFS を開き、新しいファイルシステムを作成。
2. EC2 インスタンスから EFS ファイルシステムをマウント。
3. ファイルシステムにデータを保存。
4. 必要に応じて、EFS ファイルシステムのスナップショットを作成。
5. 必要に応じて、異なる EC2 インスタンスから EFS ファイルシステムにアクセス。

## 8. 試験で問われやすいポイント

## 8.1 ネットワークファイルシステム

- **特徴**: 複数の EC2 インスタンスから同時にアクセス可能。
- **利用**: 複数サーバー間でのデータ共有。
- **試験対策**: ネットワークファイルシステムの基本概念、利用方法が問われる。

## 8.2 フルマネージドサービス

- **管理**: ファイルシステムのプロビジョニング、バックアップ、スケーリングなどを AWS が担当。
- **利点**: ユーザーはファイルシステムの管理に煩わされることなく、アプリケーション開発に集中。
- **試験対策**: フルマネージドのメリット、管理範囲が問われる。

## 8.3 スケーラビリティ

- **機能**: ストレージ容量とパフォーマンスを自動的にスケーリング。
- **目的**: データ量やトラフィックの変動に対応。
- **試験対策**: スケーリングの仕組み、メリットが問われる。

## 8.4 パフォーマンスモード

- **種類**: 汎用と最大 I/O。
- **選択**: ワークロードに合わせて適切なパフォーマンスモードを選択。
- **試験対策**: 各パフォーマンスモードの特徴、利用ケースが問われる。

## 8.5 ストレージクラス

- **種類**: 標準と低頻度アクセス（IA）。
- **利用**: データアクセス頻度に合わせて適切なストレージクラスを選択。
- **試験対策**: 各ストレージクラスの特徴、利用ケースが問われる。

## 8.6 料金体系

- **課金対象**: ストレージ使用量、データ転送量、ストレージクラス、スループット。
- **最適化**: ストレージクラス、スループットを適切に選択することでコストを最適化。
- **試験対策**: 料金体系、課金対象が問われる。

## 8.7 類似・関連サービスとの比較

- **Amazon EBS**: EC2 インスタンスにアタッチするブロックストレージサービス。EFS はネットワークファイルシステム。
- **Amazon S3**: オブジェクトストレージサービス。EFS はファイルレベルのアクセスを提供する。

## 8.8 試験で頻出となる具体的な問われ方と答え

- Q: Amazon EFS は何を提供するサービスですか？
  - A: 複数の Amazon EC2 インスタンスから同時にアクセスできる、シンプルでスケーラブルなフルマネージドのネットワークファイルシステムである。
- Q: Amazon EFS では、どのようなパフォーマンスモードが利用できますか？
  - A: 汎用と最大 I/O の 2 つのパフォーマンスモードが利用できる。
- Q: Amazon EFS のストレージクラスは何ですか？
  - A: 標準と低頻度アクセス（IA）の 2 つのストレージクラスがある。
- Q: Amazon EFS のファイルシステムへのアクセスはどのように制御しますか？
  - A: IAM ポリシー、NFS アクセス制御リスト (ACL)、セキュリティグループを使用して制御する。
- Q: Amazon EFS の料金はどのように計算されますか？
  - A: ストレージ使用量、データ転送量、ストレージクラス、プロビジョニングされたスループット容量などに基づいて計算される。
