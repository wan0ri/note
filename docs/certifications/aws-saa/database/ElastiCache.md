---
title: ElastiCache
---

## 1. サービス概要

Amazon ElastiCache は、AWS が提供するフルマネージドのインメモリデータストアサービスである。  
このサービスを利用することで、頻繁にアクセスされるデータをメモリにキャッシュすることで、アプリケーションの応答速度を向上させ、データベースへの負荷を軽減できる。  
ElastiCache は、Redis と Memcached の 2 つのエンジンをサポートしている。

主なユースケースとして、

- ウェブアプリケーションのセッション管理
- リアルタイム分析
- リーダーボード
- API キャッシュ
- データベースのホットデータキャッシュ

などが挙げられる。

## 2. 主な特徴と機能

## 2.1 Redis と Memcached のサポート

ElastiCache は、Redis と Memcached の 2 つの人気のあるインメモリデータストアエンジンをサポートしている。  
これにより、アプリケーションの要件に応じて最適なエンジンを選択できる。

- **Redis**: 複雑なデータ構造（リスト、セット、ハッシュなど）や Pub/Sub 機能をサポート。
- **Memcached**: シンプルなキーバリューストアで、高スループットなキャッシュに最適。

## 2.2 フルマネージドサービス

インフラのプロビジョニング、スケーリング、パッチ適用、バックアップなどの運用管理は AWS が自動で行う。  
これにより、開発者はデータベースの運用管理に煩わされることなく、アプリケーション開発に集中できる。

## 2.3 スケーラビリティ

ElastiCache は、ストレージとコンピューティングリソースを個別にスケールできるため、アプリケーションの需要に合わせて柔軟にリソースを調整できる。  
水平スケーリング（ノード数の増減）と垂直スケーリング（インスタンスタイプの変更）をサポートしている。

## 2.4 高い可用性

ElastiCache は、複数のアベイラビリティーゾーンにデータを分散して保存し、自動的にフェイルオーバーを処理する。  
これにより、高い可用性を実現し、システムのダウンタイムを最小限に抑える。

## 2.5 セキュリティ

ElastiCache は、データの暗号化、アクセス制御、ネットワーク分離などのセキュリティ機能を提供する。  
IAM によるアクセス制御、転送中のデータ暗号化、保存中のデータ暗号化、VPC 内でのプライベート接続をサポートしている。

- **IAM 連携**: AWS IAM を使用してアクセス制御と権限管理。
- **データ暗号化**: 転送中および保存中のデータを暗号化。
- **VPC サポート**: Amazon VPC 内でのプライベート接続。

## 2.6 バックアップと復元

ElastiCache は、自動バックアップ機能を提供しており、データを定期的にバックアップできる。  
必要に応じて、バックアップからデータを復元できる。

## 2.7 統合性

ElastiCache は、AWS の他のサービス（Amazon EC2, Amazon ECS, AWS Lambda など）と統合されており、様々なアプリケーションアーキテクチャに対応できる。  
AWS CloudWatch と連携してモニタリングを行うことができる。

## 3. アーキテクチャおよび技術要素

1. クライアントアプリケーションは、ElastiCache に接続し、データの読み書きを行う。
2. ElastiCache は、指定されたエンジン（Redis または Memcached）に基づいてインメモリデータストアを管理。
3. データは、必要に応じて複数ノードに分散して保存。
4. 読み取りリクエストは、キャッシュから応答。
5. 書き込みリクエストは、キャッシュにデータを保存。

ElastiCache は、フルマネージドサービスとして提供され、高い可用性、スケーラビリティ、セキュリティを内包している。  
アプリケーションのパフォーマンスを向上させ、データベースへの負荷を軽減する。

## 4. セキュリティと認証・認可

セキュリティは ElastiCache の重要な要素である:

- **IAM によるアクセス制御**: AWS IAM を利用して、ElastiCache リソースへのアクセスを制御し、権限を管理。
- **データ暗号化**: 転送中および保存中のデータを暗号化し、データの機密性を保護。
- **VPC サポート**: Amazon VPC 内で ElastiCache を使用する場合、プライベート接続を確立。
- **認証**: Redis の AUTH コマンドや Memcached の認証メカニズムを利用して、アクセスを制御。
- **監査ログ**: AWS CloudTrail を利用して、API 呼び出しやリソース変更を記録。

これにより、データの安全性とコンプライアンスを確保できる。

## 5. 料金形態

Amazon ElastiCache の料金は主に以下に基づく:

- **インスタンス料金**: キャッシュノードの実行時間に応じた従量課金。
- **データ転送料金**: データ転送量に応じた従量課金。
- **バックアップ料金**: 自動バックアップに利用されるストレージ量に応じた課金。

## 6. よくあるアーキテクチャ・設計パターン

一般的なパターンは以下の通りである:

- **ウェブアプリケーションのセッション管理**: ユーザーセッションデータを Redis に格納し、アプリケーションの応答速度を向上。
- **リアルタイム分析**: リアルタイムデータを Memcached にキャッシュし、高速なデータ分析を実現。
- **リーダーボード**: ゲームアプリケーションのランキングデータを Redis に格納し、高速なランキング表示を実現。
- **API キャッシュ**: API レスポンスを Memcached にキャッシュし、API サーバーへの負荷を軽減。
- **データベースのホットデータキャッシュ**: データベースのホットデータを Redis にキャッシュし、データベースへの負荷を軽減。

## 7. 設定・デプロイ手順（ハンズオン例）

1. AWS コンソールで ElastiCache クラスタを作成（Redis または Memcached）。
2. EC2 インスタンスから ElastiCache クラスタに接続。
3. キャッシュにデータを格納し、キャッシュからデータを取得。
4. 必要に応じて、スケーリングポリシーを設定し、スケールアップ/スケールダウンを実行。
5. CloudWatch でパフォーマンスメトリクスを監視。

## 8. 試験で問われやすいポイント

## 8.1 Redis と Memcached のサポート

- **Redis の特徴**: 複雑なデータ構造、Pub/Sub 機能について理解。
- **Memcached の特徴**: シンプルなキーバリューストア、高スループットについて理解。
- **使い分け**: アプリケーションの要件に応じて適切なエンジンを選択する方法を理解。

## 8.2 フルマネージドサービス

- **運用管理**: インフラのプロビジョニング、スケーリング、パッチ適用、バックアップなどが AWS に自動化されていることを理解。
- **開発への集中**: 開発者がデータベース運用に煩わされることなく、アプリケーション開発に集中できることを理解。

## 8.3 スケーラビリティ

- **水平スケーリング**: ノード数を増減する方法について理解。
- **垂直スケーリング**: インスタンスタイプを変更する方法について理解。
- **柔軟なスケーリング**: アプリケーションの需要に合わせてリソースを調整する方法を理解。

## 8.4 高い可用性

- **マルチ AZ**: 複数のアベイラビリティーゾーンにデータを分散して保存する方法を理解。
- **自動フェイルオーバー**: 自動フェイルオーバー機能で高い可用性を実現する方法を理解。

## 8.5 セキュリティ

- **IAM**: IAM によるアクセス制御と権限管理について理解。
- **データ暗号化**: 転送中および保存中のデータを暗号化することについて理解。
- **VPC サポート**: VPC 内でのプライベート接続について理解。
- **認証**: Redis の AUTH コマンドや Memcached の認証メカニズムについて理解。

## 8.6 料金体系

- **インスタンス料金**: キャッシュノードの実行時間による従量課金について理解。
- **データ転送料金**: データ転送量による従量課金について理解。
- **バックアップ料金**: 自動バックアップに利用されるストレージ量による課金について理解。

## 8.7 類似・関連サービスとの比較

- **Amazon DynamoDB Accelerator (DAX)**: DynamoDB のキャッシュに特化。ElastiCache はより汎用的なキャッシュサービス。
- **Redis Enterprise Cloud**: Redis のフルマネージドサービス。ElastiCache は AWS プラットフォームに統合されたサービス。

## 8.8 試験で頻出となる具体的な問われ方と答え

- Q: Amazon ElastiCache の主な用途は？
  - A: 頻繁にアクセスされるデータをメモリにキャッシュし、アプリケーションの応答速度を向上させること。
- Q: ElastiCache がサポートするエンジンは？
  - A: Redis と Memcached。
- Q: Redis と Memcached の違いは？
  - A: Redis は複雑なデータ構造、Memcached はシンプルなキーバリューストア。
- Q: ElastiCache のスケーリング方法の種類は？
  - A: 水平スケーリングと垂直スケーリング。
- Q: ElastiCache のセキュリティ対策は？
  - A: IAM によるアクセス制御、データ暗号化、VPC サポートなど。
- Q: ElastiCache の料金体系は？
  - A: インスタンス料金、データ転送料金、バックアップ料金に基づく従量課金。
- Q: ElastiCache と DAX の違いは？
  - A: DAX は DynamoDB に特化、ElastiCache は汎用的なキャッシュサービス。
