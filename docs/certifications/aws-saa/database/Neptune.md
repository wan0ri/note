---
title: Neptune
---

## 1. サービス概要

Amazon Neptune は、高速かつ信頼性の高いグラフデータベースサービスである。  
ユーザーは、高度に接続されたデータを保存、管理、クエリでき、ソーシャルネットワーク、レコメンデーションエンジン、ナレッジグラフなどのアプリケーションに適している。  
Neptune は、フルマネージドサービスであり、スケーラブルなグラフデータベース環境を構築し、複雑なデータ関係を効率的に処理できる。

主なユースケースとして、

- ソーシャルネットワーク
- レコメンデーションエンジン
- ナレッジグラフ
- 不正検知
- ID とアクセス管理
- ライフサイエンス

などが挙げられる。  
Amazon Neptune は、これらのユースケースに対応するための様々な機能と、AWS の他のサービスとの統合を提供する。

## 2. 主な特徴と機能

## 2.1 グラフデータベース

Neptune は、グラフデータベースを提供し、ノード（頂点）とエッジ（辺）で構成されるグラフ構造でデータを表現する。  
これにより、関係性が強いデータを効率的に管理し、複雑なクエリを高速に実行できる。

## 2.2 フルマネージドサービス

Neptune は、フルマネージドサービスであるため、ユーザーはデータベースのプロビジョニング、スケーリング、パッチ適用などの管理を行う必要はない。  
AWS が、これらの管理作業を自動的に行う。

## 2.3 スケーラビリティ

Neptune は、ストレージ容量とスループットを自動的にスケーリングできる。  
これにより、データ量の増加やトラフィックの変動に対応し、安定したパフォーマンスを提供できる。

## 2.4 高い可用性

Neptune は、複数のアベイラビリティゾーンにデータを複製することで、高い可用性を実現している。  
これにより、ハードウェア障害やゾーン障害が発生した場合でも、アプリケーションの可用性を維持できる。

## 2.5 Gremlin と SPARQL

Apache TinkerPop Gremlin と SPARQL という、グラフデータベースの標準的なクエリ言語をサポートしている。  
これにより、柔軟なクエリでデータを検索できる。

## 2.6 ACID トランザクション

Neptune は、ACID（Atomicity, Consistency, Isolation, Durability）トランザクションをサポートしている。  
これにより、データの整合性を維持できる。

## 2.7 統合性と拡張性

Amazon Neptune は、Amazon SageMaker, AWS Lambda, Amazon S3 などの AWS の他のサービスと密接に統合されている。  
また、API を利用して、グラフデータの読み書きやデータベースの管理を自動化することもできる。

## 3. アーキテクチャおよび技術要素

1. ユーザーは、Neptune データベースインスタンスを作成。
2. アプリケーションは、Gremlin または SPARQL クエリを使用して、グラフデータを読み書き。
3. Neptune は、グラフデータを複数のストレージノードに分散し、自動的にスケーリング。
4. 必要に応じて、リードレプリカを作成し、読み込みのスケーラビリティを向上。
5. Neptune は、データの耐久性と可用性を確保。

Amazon Neptune は、AWS のインフラ上に構築されており、高い可用性、スケーラビリティ、パフォーマンスを提供する。  
データベースのプロビジョニングや管理は AWS が行うため、ユーザーはインフラの管理を行う必要はない。

## 4. セキュリティと認証・認可

Amazon Neptune は、データのセキュリティを確保するために、以下の機能を提供する:

- **IAM 統合**: AWS Identity and Access Management (IAM) を利用して、Neptune へのアクセスを制御する。
- **VPC 内での実行**: Neptune データベースインスタンスは Virtual Private Cloud (VPC) 内で実行され、ネットワーク隔離を実現。
- **データ暗号化**: データは転送中および保存時に暗号化される。
- **アクセス制御**: IAM ポリシーを通じて、ユーザーやグループごとに、Neptune データベースの操作権限を詳細に制御できる。
- **監査ログ**: CloudTrail を通じて、Neptune の利用状況を監査できる。

これらのセキュリティ対策により、グラフデータへの不正アクセスを防止し、機密情報を保護できる。

## 5. 料金形態

Amazon Neptune の料金は主に以下に基づく:

- **データベースインスタンス**: データベースインスタンスの利用時間とインスタンスタイプに応じた料金。
- **ストレージ**: データベースで使用されたストレージ容量に応じて課金。
- **I/O**: データベースへの I/O リクエスト数に応じて課金。
- **バックアップストレージ**: バックアップデータの保存容量に応じて課金。
- **データ転送**: データ転送量に応じて課金。

## 6. よくあるアーキテクチャ・設計パターン

Amazon Neptune は、様々なグラフデータを利用するアプリケーションに利用できる。  
一般的なパターンは以下の通りである:

- **ソーシャルネットワーク**: ソーシャルネットワークのユーザー、関係性、アクティビティなどをグラフ構造で表現し、友人関係の発見やコミュニティ分析に利用。
- **レコメンデーションエンジン**: ユーザーの行動履歴や嗜好に基づいて、商品やコンテンツを推奨するためにグラフデータを利用。
- **ナレッジグラフ**: 知識をグラフ構造で表現し、複雑な情報を整理、検索、分析。
- **不正検知**: 取引データやユーザーデータをグラフ構造で分析し、不正行為を検出。
- **ID とアクセス管理**: アクセス権限やロールをグラフ構造で管理し、セキュリティポリシーの適用を容易化。
- **ライフサイエンス**: ゲノムデータ、タンパク質相互作用、薬品情報をグラフ構造で表現し、研究開発を加速。

## 7. 設定・デプロイ手順（ハンズオン例）

1. AWS マネジメントコンソールから Amazon Neptune を開き、新しいデータベースインスタンスを作成。
2. VPC、サブネット、セキュリティグループなどのネットワーク設定を構成。
3. Gremlin または SPARQL クライアントを使用して、Neptune データベースに接続。
4. グラフデータをインポートし、クエリを実行。
5. 必要に応じて、リードレプリカを作成し、読み込みのスケーラビリティを向上。

## 8. 試験で問われやすいポイント

## 8.1 グラフデータベース

- **構造**: ノード（頂点）とエッジ（辺）で構成されるグラフ構造。
- **利用**: 関係性が強いデータを効率的に管理。
- **試験対策**: グラフデータベースの基本概念、利用ケースが問われる。

## 8.2 フルマネージドサービス

- **管理**: データベースのプロビジョニング、スケーリング、パッチ適用などを AWS が担当。
- **利点**: ユーザーはインフラの管理が不要。
- **試験対策**: フルマネージドのメリット、管理範囲が問われる。

## 8.3 スケーラビリティ

- **機能**: ストレージ容量とスループットを自動的にスケーリング。
- **目的**: データ量の増加やトラフィックの変動に対応。
- **試験対策**: 自動スケーリングの仕組み、メリットが問われる。

## 8.4 高い可用性

- **実現方法**: 複数のアベイラビリティゾーンにデータを複製。
- **目的**: 障害発生時でもアプリケーションの可用性を維持。
- **試験対策**: 高可用性の仕組み、リージョン間のレプリケーションが問われる。

## 8.5 クエリ言語

- **種類**: Apache TinkerPop Gremlin、SPARQL。
- **利用**: グラフデータの検索。
- **試験対策**: 各クエリ言語の特徴、利用ケースが問われる。

## 8.6 料金体系

- **課金対象**: データベースインスタンス、ストレージ、I/O、バックアップストレージ、データ転送量。
- **最適化**: 不要なデータ転送を削減し、適切なインスタンスタイプを選択することがコスト削減に有効。
- **試験対策**: 料金体系、課金対象が問われる。

## 8.7 類似・関連サービスとの比較

- **Amazon RDS**: リレーショナルデータベースサービス。Neptune はグラフデータベース。
- **Amazon DynamoDB**: NoSQL データベースサービス。Neptune は関係性を重視したグラフデータベース。

## 8.8 試験で頻出となる具体的な問われ方と答え

- Q: Amazon Neptune は何を提供するサービスですか？
  - A: 高速かつ信頼性の高いグラフデータベースサービスを提供する。
- Q: Amazon Neptune は、どのようなデータモデルでデータを表現しますか？
  - A: ノード（頂点）とエッジ（辺）で構成されるグラフ構造でデータを表現する。
- Q: Amazon Neptune は、どのようなクエリ言語をサポートしていますか？
  - A: Apache TinkerPop Gremlin と SPARQL というグラフデータベースの標準的なクエリ言語をサポートしている。
- Q: Amazon Neptune は、どのように可用性を確保していますか？
  - A: 複数のアベイラビリティゾーンにデータを複製することで、高い可用性を実現している。
- Q: Amazon Neptune の料金はどのように計算されますか？
  - A: データベースインスタンスの利用時間、ストレージ容量、I/O リクエスト数、バックアップストレージ、データ転送量などに基づいて計算される。
