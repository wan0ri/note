---
title: AWS AppSync
---

## 1. サービス概要

AWS AppSync は、GraphQL API を簡単に構築できるフルマネージドサービスである。  
リアルタイムデータの同期、オフラインアクセス、データソースとの統合などを容易にし、Web アプリケーションやモバイルアプリケーションの開発を加速する。  
開発者は、複雑なバックエンドロジックを記述することなく、データへのアクセスや更新を GraphQL API を通じて効率的に行うことができる。  
これにより、アプリケーション開発の迅速化、保守性の向上、ユーザーエクスペリエンスの向上に貢献する。

主なユースケースとして、

- リアルタイムチャットアプリケーション
- コラボレーションツール
- IoT ダッシュボード
- モバイルデータ同期
- オフライン対応アプリケーション

などが挙げられます。  
AWS AppSync は、これらのユースケースに対応するための様々な機能と、AWS の他のサービスとの統合を提供する。

## 2. 主な特徴と機能

## 2.1 GraphQL API

AWS AppSync は、GraphQL API を構築するためのサービスである。  
GraphQL は、クライアントが必要なデータのみを取得できるクエリ言語であり、REST API と比較して、効率的なデータ取得を実現できる。  
また、GraphQL スキーマを定義することで、API の構造と型を明示的に定義できる。

## 2.2 リアルタイムデータ同期

WebSocket プロトコルをサポートしており、サブスクリプションを使用してリアルタイムデータの変更をクライアントにプッシュ通知できる。  
これにより、チャットアプリケーションやコラボレーションツールなどのリアルタイムアプリケーションを簡単に構築できる。

## 2.3 オフラインデータアクセス

クライアント側でデータをキャッシュし、オフライン時にデータの閲覧や変更を可能にする機能を提供する。  
オンラインになった際には、変更を自動的に同期する。  
これにより、モバイルアプリケーションなど、ネットワーク環境が不安定な状況でも快適なユーザーエクスペリエンスを提供できる。

## 2.4 データソースとの統合

AWS AppSync は、様々なデータソースと統合できる。  
DynamoDB、RDS、Lambda、HTTP エンドポイントなどのデータソースから、GraphQL API を通じてデータにアクセスできる。  
また、データソースへのアクセスは、GraphQL リゾルバーを定義することでカスタマイズできる。

## 2.5 認証と認可

AWS AppSync は、Amazon Cognito、IAM、API キー、カスタム認証など、様々な認証・認可方法をサポートしている。  
これにより、API へのアクセスを安全に制御し、データ漏洩や不正アクセスを防止できる。

## 2.6 スキーマ管理

GraphQL スキーマを定義し、バージョン管理できる。  
スキーマは SDL（Schema Definition Language）で記述し、API の構造やデータ型を定義する。  
スキーマの変更は、API をデプロイすることなく、すぐに適用できる。

## 2.7 API モニタリング

CloudWatch と連携して、API のリクエスト数、エラー率、レイテンシーなどのメトリクスを監視できる。  
ログを収集して、API のパフォーマンスや問題を分析できる。

## 2.8 統合性と拡張性

AWS AppSync は、AWS の他のサービスと密接に統合されており、API の機能を拡張できる。  
また、AWS Lambda と連携してカスタムロジックを実装することも可能である。

## 3. アーキテクチャおよび技術要素

1. クライアントアプリケーションは、GraphQL クエリを AWS AppSync のエンドポイントに送信。
2. AWS AppSync は、クライアントからのリクエストを受け取り、認証・認可を実施。
3. GraphQL リゾルバーを使用して、データソースからデータを取得または更新。
4. データソースからのレスポンスを GraphQL 形式でクライアントに返却。
5. サブスクリプションを利用した場合は、リアルタイムデータの変更をクライアントにプッシュ通知。

AWS AppSync は、フルマネージドサービスであり、サーバーレスアーキテクチャで構築されています。  
可用性、スケーラビリティは AWS が管理し、ユーザーはインフラの管理を行う必要はありません。

## 4. セキュリティと認証・認可

AWS AppSync は、API のセキュリティを確保するために、以下の機能を提供する:

- **Amazon Cognito 連携**: ユーザー認証、認可を管理し、セキュアなアクセスを実現。
- **IAM ロール**: AWS リソースへのアクセスを IAM ロールで制御。
- **API キー**: API キーを使用して、API へのアクセスを制限。
- **カスタム認証**: Lambda 関数を利用してカスタム認証ロジックを実装。
- **HTTPS 通信**: API へのアクセスを HTTPS で保護。

これらのセキュリティ対策により、API への不正アクセスを防止し、機密データを保護する。

## 5. 料金形態

AWS AppSync の料金は主に以下に基づきます:

- **GraphQL クエリ数**: API への GraphQL クエリ数に応じた従量課金。
- **リアルタイムデータ更新**: リアルタイムデータ更新の頻度に応じた課金。
- **データ転送量**: API との間で転送されるデータ量に応じた課金。
- **キャッシュ利用料**: API レスポンスをキャッシュした場合、追加料金が発生。

## 6. よくあるアーキテクチャ・設計パターン

AWS AppSync は、様々なアプリケーション開発に利用できる。  
一般的なパターンは以下の通りです:

- **リアルタイムチャットアプリケーション**: WebSocket を使ったリアルタイムデータ同期により、チャットアプリケーションを構築。
- **コラボレーションツール**: 複数ユーザーでのデータ共有、リアルタイムでの変更通知を実装。
- **IoT ダッシュボード**: IoT デバイスからのデータをリアルタイムで可視化し、表示。
- **モバイルデータ同期**: オフラインでのデータ操作をサポートし、オンライン時に自動同期。
- **サーバーレスアプリケーション**: AWS Lambda と連携し、ビジネスロジックを実装。
- **データ統合**: 複数のデータソースからデータを取得し、GraphQL API で統合。

## 7. 設定・デプロイ手順（ハンズオン例）

1. AWS マネジメントコンソールから AWS AppSync を開き、新しい GraphQL API を作成。
2. GraphQL スキーマを定義し、API の構造やデータ型を定義。
3. データソース（DynamoDB、Lambda など）を定義し、リゾルバーを設定。
4. 認証と認可の設定を行い、API へのアクセスを制御。
5. クライアントアプリケーションから GraphQL クエリを実行し、データを取得。
6. リアルタイムデータをプッシュ通知するためのサブスクリプションを設定。

## 8. 試験で問われやすいポイント

## 8.1 GraphQL API

- **GraphQL とは**: クライアントが必要なデータのみを取得できるクエリ言語である。
- **利点**: REST API と比較して、効率的なデータ取得、スキーマによる型定義。
- **試験対策**: GraphQL の基本概念、REST API との比較が問われる。

## 8.2 リアルタイムデータ同期

- **機能**: WebSocket プロトコルを使用し、リアルタイムデータの変更をクライアントにプッシュ通知。
- **利用ケース**: チャットアプリケーション、コラボレーションツールなど。
- **試験対策**: サブスクリプションの設定方法、ユースケースが問われる。

## 8.3 オフラインデータアクセス

- **機能**: クライアント側でデータをキャッシュし、オフライン時にデータの閲覧、変更が可能。
- **利用ケース**: モバイルアプリケーションなどネットワーク環境が不安定な環境。
- **試験対策**: オフラインデータの同期方法、キャッシュの仕組みが問われる。

## 8.4 データソースとの統合

- **サポートデータソース**: DynamoDB, RDS, Lambda, HTTP エンドポイントなど。
- **リゾルバー**: データソースへのアクセスロジックをカスタマイズするための機能。
- **試験対策**: データソースの設定、リゾルバーの書き方が問われる。

## 8.5 認証と認可

- **認証方法**: Amazon Cognito, IAM, API キー, カスタム認証など。
- **目的**: API への不正アクセスを防止し、データを保護。
- **試験対策**: 各認証方法の設定、利用シーンが問われる。

## 8.6 スキーマ管理

- **スキーマ言語**: SDL (Schema Definition Language)。
- **機能**: スキーマの定義、バージョン管理。
- **試験対策**: スキーマの書き方、更新方法が問われる。

## 8.7 料金体系

- **課金対象**: GraphQL クエリ数、リアルタイムデータ更新、データ転送量、キャッシュ利用料など。
- **最適化**: 不要なクエリを減らす、キャッシュを有効にするなどがコスト最適化に有効。

## 8.8 類似・関連サービスとの比較

- **Amazon API Gateway**: REST API を構築するサービス。AppSync は GraphQL API に特化。
- **AWS Lambda**: カスタムロジックを実装するためのサーバーレスコンピューティングサービス。AppSync のデータソースとして利用可能。
- **AWS Amplify**: フロントエンドアプリケーション開発を加速するサービス。AppSync は Amplify と組み合わせて利用可能。

## 8.9 試験で頻出となる具体的な問われ方と答え

- Q: AWS AppSync は何を構築するサービスですか？
  - A: GraphQL API を構築するサービスである。
- Q: AWS AppSync のリアルタイムデータ同期はどのように実現されるか？
  - A: WebSocket プロトコルを使用して、サブスクリプションによるプッシュ通知で実現される。
- Q: AWS AppSync のオフラインデータアクセスはどのように機能するか？
  - A: クライアント側でデータをキャッシュし、オフライン時にデータの閲覧、変更を可能にする。
- Q: AWS AppSync の主なデータソースは何ですか？
  - A: DynamoDB, RDS, Lambda, HTTP エンドポイントなどである。
- Q: AWS AppSync の料金はどのように計算されるか？
  - A: GraphQL クエリ数、リアルタイムデータ更新、データ転送量、キャッシュ利用料などに基づいて計算される。
