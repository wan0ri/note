---
title: Amazon Lex
---

## 1. サービス概要

Amazon Lex は、会話型インターフェース（チャットボット、音声ボット）を簡単に構築・デプロイできる AWS の AI サービスである。  
音声およびテキストベースの会話を自然言語で理解し、Amazon Alexa と同じディープラーニング技術を利用しているため、高い言語理解精度を実現する。

主なユースケースとしては、

- カスタマーサポートの自動応答チャットボット
- 社内ヘルプデスク
- 音声 IVR システムへの組み込み
- IoT デバイスやモバイルアプリへの会話型インターフェース

などが挙げられる。

## 2. 主な特徴と機能

## 2.1 インテントとスロットの設計

Lex では、ユーザーの意図（Intent）を定義し、必要な情報（Slot）を収集するコンセプトでチャットボットを設計する。

例：レストラン予約ボットなら「予約の Intent」、「日時」「人数」などの Slot を設定し、会話フローを自動化する。

## 2.2 多言語対応と会話フロー制御

日本語を含む複数言語で Bot を作成でき、発話のバリエーション（Utterances）を登録することで、様々な言い回しに柔軟に対応。 Branching や Loop といった会話フローの制御も GUI やコンソール上で視覚的に設定できる。

## 2.3 高精度の音声認識・自然言語理解

Amazon Alexa と同じテクノロジーが組み込まれており、自動音声認識 (ASR) と 自然言語理解 (NLU)が強力である。  
音声 IVR に連携したり、ポリ音声（Amazon Polly）と組み合わせて音声の応答まで実現できる。

## 2.4 Lambda との連携（バックエンドロジック）

Bot がユーザーのインテントを特定したら、AWS Lambda 関数を呼び出して必要なバックエンド処理（DB 操作、API 呼び出しなど）を実行。  
結果を再度 Lex に返すことで、ユーザーへの応答を会話の中で行うことが可能である。

## 2.5 チャット/音声のマルチチャネル展開

Amazon Connect（コンタクトセンターサービス）や Slack、Facebook Messenger などと連携し、マルチチャネル・マルチデバイス対応の会話型 UI を構築できる。  
Web アプリへの埋め込みウィジェットも用意されており、実装ハードルが低い点も特徴である。

## 3. アーキテクチャおよび技術要素

1. Lex コンソールまたは CLI で Bot を作成し、インテント・スロットを定義
2. ユーザーからの入力（音声/テキスト）は Lex に送られ、インテントを解析
3. 必要であれば Lambda 関数を呼び出してビジネスロジックを実行
4. Lex は応答テキスト/音声を生成し、ユーザーに返答
5. 複数チャネル（Web、Amazon Connect、SNS メッセージング等）で Bot を利用可能

この構成により、高度な NLP と音声認識を活用しながら、スケーラブルかつ柔軟に会話型インターフェースを提供できる。

## 4. セキュリティと認証・認可

Amazon Lex 導入時におけるセキュリティポイントは以下の通りである:

- **IAM ロール**: Lex が Lambda など他サービスを呼ぶ場合、最小権限のロールを付与
- **SSL/TLS**: Web チャットの場合は HTTPS 通信で暗号化
- **ストレージ暗号化**: Bot 定義やログの保存先（CloudWatch Logs など）を暗号化できる
- **Lambda セキュリティ**: バックエンドロジック内で機密情報を扱う際は Secrets Manager や KMS との連携を考慮

## 5. 料金形態

Amazon Lex の料金は次の要素で構成される:

- **音声リクエスト**: 1 回の音声リクエストあたり従量課金
- **テキストリクエスト**: 1 回のテキストリクエストあたり従量課金

## 6. よくあるアーキテクチャ・設計パターン

Amazon Lex を導入するパターンは以下の通りである:

- **カスタマーサポートチャットボット**: インテントを「注文状況確認」「返品処理」などに分け、Lambda で在庫 DB を参照
- **Amazon Connect IVR**: 音声問い合わせを Lex で解析し、オペレーターへの転送を最適化
- **社内 IT ヘルプデスク**: パスワードリセットや PC トラブルの一次対応を自動化
- **Web 埋め込みチャット**: Web サイトへ JavaScript ウィジェットを仕込み、リアルタイムに接客サポート

## 7. 設定・デプロイ手順（ハンズオン例）

1. AWS コンソールで「Amazon Lex」を検索し、「Create bot」をクリック
2. Bot 名、言語（例: Japanese）、音声やセキュリティ設定を指定
3. インテントを追加し、ユーザーが言いそうなフレーズ（Utterances）を登録、Slot を設定（例: 日付や場所の入力）
4. Fulfillment で「AWS Lambda 関数を呼び出す」を選択し、ビジネスロジックを紐づけ
5. ビルド → テストで会話フローを確認。問題がなければ Publish し、各種チャネルから利用
6. Web チャットや Amazon Connect などに接続し、本番環境で稼働させる

## 8. 試験で問われやすいポイント

## 8.1 インテントとスロットの仕組み

- **インテント**: ユーザーが行いたいアクションの定義
- **スロット**: インテント実行に必要な変数（日時、場所、数量など）
- **Utterances**: インテントをトリガーするための自然言語パターン集

## 8.2 音声とテキストのハンドリング

- **音声 → テキスト変換**: Lex が ASR を実行し、テキスト化してインテント解析
- **音声応答**: Amazon Polly と連携して合成音声で返信
- **テキストチャット**: Web や SNS、メッセンジャーなどテキスト入力でインテント処理

## 8.3 Lambda との連携

- **Fulfillment**: インテントが確定したら Lambda 関数でバックエンド処理（DB アクセス、API 呼び出し）
- **Validation**: Slot 入力のバリデーションを Lambda で行い、エラー時に再入力を促す

## 8.4 セキュリティとポリシー

- **IAM ロール**: Lex が Lambda を呼ぶロールを最小権限で付与
- **ログ**: Amazon CloudWatch Logs に会話ログを保存可能。機密情報の取り扱いには注意

## 8.5 料金構造

- **無料利用枠**: 月 3 万回のテキストリクエストと音声リクエスト各 1 万回が 12 ヶ月
- **超過従量課金**: 音声/テキストそれぞれ 1 リクエストあたりの料金

## 8.6 試験で頻出となる具体的な問われ方と答え

- Q: Amazon Lex で意図（Intent）を検出する仕組みは？
  - A: ユーザーの発話（Utterances）を自然言語処理で解析し、最も適合するインテントを推定。
- Q: インテントに必要な変数を取得する方法は？
  - A: Slot を定義して「日付」や「場所」などをユーザーに尋ね、回答を格納する。
- Q: バックエンド処理を行うための設定は？
  - A: Fulfillment 部分に Lambda 関数を紐づけ、インテント確定時にロジックを実行。
- Q: 音声 IVR システムに Lex を組み込む典型例は？
  - A: Amazon Connect の呼び出しフローで Lex Bot を呼び出し、自然言語によるメニュー案内を実装。
- Q: 料金の注意点は？
  - A: 音声/テキストリクエスト数に従量課金。無料枠や連携先（Polly、Lambda）のコストも考慮。
